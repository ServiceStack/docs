import{_ as s,o as a,c as e,d as n,a as t}from"./app.3ff27770.js";var o="/assets/key-features.47b2e4f5.png",p="/assets/performance.8afee0e1.png",c="/assets/durability.d445e4aa.png";const w='{"title":"Getting Started with Redis in .NET","description":"","frontmatter":{"slug":"getting-started","title":"Getting Started with Redis in .NET"},"headers":[{"level":2,"title":"Key Features of Redis","slug":"key-features-of-redis"},{"level":2,"title":"High Performance and Speed","slug":"high-performance-and-speed"},{"level":2,"title":"Durability and Persistence","slug":"durability-and-persistence"},{"level":2,"title":"Scalability and High Availability","slug":"scalability-and-high-availability"},{"level":2,"title":"Extensible and Versatile","slug":"extensible-and-versatile"},{"level":2,"title":"Setting Up a Local Redis Server with Docker","slug":"setting-up-a-local-redis-server-with-docker"},{"level":2,"title":"Using the redis-cli from Docker","slug":"using-the-redis-cli-from-docker"},{"level":2,"title":"Installing and Setting Up ServiceStack.Redis in Your Project","slug":"installing-and-setting-up-servicestack-redis-in-your-project"},{"level":3,"title":"Using the ServiceStack x tool","slug":"using-the-servicestack-x-tool"},{"level":2,"title":"Connecting and Using Redis Client Managers","slug":"connecting-and-using-redis-client-managers"},{"level":3,"title":"Connecting to Redis","slug":"connecting-to-redis"},{"level":3,"title":"Using the Client with .NET Core Dependency Injection","slug":"using-the-client-with-net-core-dependency-injection"},{"level":2,"title":"Leveraging the Simplicity of ICacheClient","slug":"leveraging-the-simplicity-of-icacheclient"},{"level":2,"title":"Using the RedisClient Directly","slug":"using-the-redisclient-directly"},{"level":2,"title":"Async Usability of ServiceStack.Redis","slug":"async-usability-of-servicestack-redis"},{"level":2,"title":"Storing Complex Objects: Strongly Typed Client API","slug":"storing-complex-objects-strongly-typed-client-api"},{"level":2,"title":"Working with Redis Data Structures","slug":"working-with-redis-data-structures"},{"level":3,"title":"Lists","slug":"lists"},{"level":3,"title":"Sets","slug":"sets"},{"level":3,"title":"Sorted Sets","slug":"sorted-sets"},{"level":2,"title":"Conclusion: The Power of Redis and ServiceStack.Redis","slug":"conclusion-the-power-of-redis-and-servicestack-redis"}],"relativePath":"redis/getting-started.md"}',i={},r=n("div",{class:"py-8 max-w-7xl mx-auto"},[n("iframe",{class:"video-hd",width:"560",height:"315",src:"https://www.youtube.com/embed/jBdOvTvjyqY",title:"YouTube video player",frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:""})],-1),l=t('<h1 id="introduction-to-redis-as-a-technology" tabindex="-1">Introduction to Redis as a Technology <a class="header-anchor" href="#introduction-to-redis-as-a-technology" aria-hidden="true">#</a></h1><p>Redis, standing for REmote DIctionary Server, is an open-source, in-memory data structure store. It&#39;s widely used as a database, cache, and message broker. With its unique set of features and unparalleled speed, it&#39;s a crucial tool for a modern developer&#39;s toolkit.</p><h2 id="key-features-of-redis" tabindex="-1">Key Features of Redis <a class="header-anchor" href="#key-features-of-redis" aria-hidden="true">#</a></h2><p>Redis supports various kinds of data structures like <a href="https://redis.io/docs/data-types/strings" target="_blank" rel="noopener noreferrer">strings</a>, <a href="https://redis.io/docs/data-types/hashes" target="_blank" rel="noopener noreferrer">hashes</a>, <a href="https://redis.io/docs/data-types/lists" target="_blank" rel="noopener noreferrer">lists</a>, <a href="https://redis.io/docs/data-types/sets" target="_blank" rel="noopener noreferrer">sets</a>, <a href="https://redis.io/docs/data-types/sorted-sets" target="_blank" rel="noopener noreferrer">sorted sets with range queries</a>, <a href="https://redis.io/docs/data-types/bitmaps" target="_blank" rel="noopener noreferrer">bitmaps</a>, <a href="https://redis.io/docs/data-types/hyperloglogs" target="_blank" rel="noopener noreferrer">hyperloglogs</a>, and geospatial indexes with <a href="https://redis.io/docs/data-types/geospatial" target="_blank" rel="noopener noreferrer">radius queries</a>. This wide array of data types and its ability to perform <a href="https://redis.io/docs/manual/transactions/" target="_blank" rel="noopener noreferrer">atomic operations</a> make Redis extremely versatile for solving a myriad of problems.</p><p><img src="'+o+'" alt=""></p><h2 id="high-performance-and-speed" tabindex="-1">High Performance and Speed <a class="header-anchor" href="#high-performance-and-speed" aria-hidden="true">#</a></h2><p>This support for a wide array of fundamental computational storage data structures is what sets Redis apart, and enables <a href="https://redis.io/topics/benchmarks" target="_blank" rel="noopener noreferrer">blazing speed</a> when applied correctly. As an in-memory data store, reading and writing data happens exceedingly fast. This makes Redis an excellent choice for applications that require real-time data processing.</p><p><img src="'+p+'" alt=""></p><h2 id="durability-and-persistence" tabindex="-1">Durability and Persistence <a class="header-anchor" href="#durability-and-persistence" aria-hidden="true">#</a></h2><p>Even though Redis is an in-memory data store, it provides mechanisms to achieve data <a href="https://redis.io/topics/persistence" target="_blank" rel="noopener noreferrer">persistence</a>. You have the flexibility to choose from options like <a href="https://redis.io/docs/management/persistence/#snapshotting" target="_blank" rel="noopener noreferrer">snapshotting</a> and append-only files (AOF), depending on your application&#39;s needs.</p><h2 id="scalability-and-high-availability" tabindex="-1">Scalability and High Availability <a class="header-anchor" href="#scalability-and-high-availability" aria-hidden="true">#</a></h2><p>Redis has robust features like <a href="https://redis.io/topics/replication" target="_blank" rel="noopener noreferrer">replication</a>, <a href="https://redis.io/commands/eval" target="_blank" rel="noopener noreferrer">Lua scripting</a>, <a href="https://redis.io/docs/manual/transactions" target="_blank" rel="noopener noreferrer">transactions</a>, and different levels of <a href="https://redis.io/topics/persistence" target="_blank" rel="noopener noreferrer">on-disk persistence</a>. With the help of <a href="https://redis.io/topics/sentinel" target="_blank" rel="noopener noreferrer">Redis Sentinel</a>, it provides high availability via automatic partitioning across multiple Redis nodes. It is also widely supported on major cloud providers as a managed service, like on <a href="https://aws.amazon.com/elasticache/redis/" target="_blank" rel="noopener noreferrer">AWS under the ElastiCache product</a>.</p><p><img src="'+c+`" alt=""></p><h2 id="extensible-and-versatile" tabindex="-1">Extensible and Versatile <a class="header-anchor" href="#extensible-and-versatile" aria-hidden="true">#</a></h2><p>You can extend Redis functionality using Redis modules. It&#39;s also a good fit for job &amp; queue management, caching, real-time analytics, and many other use-cases.</p><p>Before we dive into using the ServiceStack.Redis .NET client, we will need a locally running Redis server. The easiest way to get this working is by using the <a href="https://hub.docker.com/_/redis" target="_blank" rel="noopener noreferrer">official Redis Docker image</a>, and using <a href="https://www.docker.com/products/docker-desktop" target="_blank" rel="noopener noreferrer">Docker Desktop</a> to run it.</p><h2 id="setting-up-a-local-redis-server-with-docker" tabindex="-1">Setting Up a Local Redis Server with Docker <a class="header-anchor" href="#setting-up-a-local-redis-server-with-docker" aria-hidden="true">#</a></h2><p>To follow along with this tutorial, you will need a running instance of Redis. One of the easiest ways to get this set up is through Docker, which allows you to run a Redis server within a container on your machine.</p><p>If you do not have Docker installed, you can download it from the <a href="https://www.docker.com/products/docker-desktop" target="_blank" rel="noopener noreferrer">official Docker website</a>.</p><p>Once you have Docker installed and running, you can set up a Redis instance with the following command:</p><div class="language-bash"><pre><code><span class="token function">docker</span> run <span class="token parameter variable">--name</span> local-redis <span class="token parameter variable">-p</span> <span class="token number">6379</span>:6379 <span class="token parameter variable">-d</span> redis
</code></pre></div><p>This command tells Docker to run a container with the name &quot;local-redis&quot;, using the official Redis image from Docker Hub. The <code>-p</code> flag maps the default Redis port (6379) from the container to your local machine, and the <code>-d</code> flag tells Docker to run the container in the background.</p><p>To confirm that your Redis server is running correctly, you can use the following command:</p><div class="language-bash"><pre><code><span class="token function">docker</span> <span class="token function">ps</span>
</code></pre></div><p>This command lists all running Docker containers. If everything is set up correctly, you should see your &quot;local-redis&quot; container in the list.</p><p>Now, your local Redis server is running and ready to be connected on <code>localhost:6379</code>.</p><p>For more detailed information about Docker commands, you can refer to the <a href="https://docs.docker.com/engine/reference/commandline/cli/" target="_blank" rel="noopener noreferrer">official Docker documentation</a>.</p><h2 id="using-the-redis-cli-from-docker" tabindex="-1">Using the redis-cli from Docker <a class="header-anchor" href="#using-the-redis-cli-from-docker" aria-hidden="true">#</a></h2><p>Another way to validate your local Redis Docker container is running and access it is by using the Redis-CLI. If you don&#39;t have the Redis-CLI, we can actually use it from the same <code>redis</code> Docker image using the following command.</p><div class="language-bash"><pre><code><span class="token function">docker</span> run <span class="token parameter variable">-it</span> redis /bin/bash <span class="token parameter variable">-c</span> <span class="token string">&quot;redis-cli -h host.docker.internal&quot;</span>
</code></pre></div><blockquote><p><code>host.docker.internal</code> is a way of accessing the Docker host containers, however it may only work on Windows &amp; macOS.</p></blockquote><h2 id="installing-and-setting-up-servicestack-redis-in-your-project" tabindex="-1">Installing and Setting Up ServiceStack.Redis in Your Project <a class="header-anchor" href="#installing-and-setting-up-servicestack-redis-in-your-project" aria-hidden="true">#</a></h2><p>Now that we have our local Redis server set up and running, let&#39;s move on to adding ServiceStack.Redis to your .NET project. Here we will demonstrate this process in a .NET Console application for simplicity.</p><p>To start with, make sure you have the <a href="https://dotnet.microsoft.com/download" target="_blank" rel="noopener noreferrer">.NET SDK</a> installed on your system. Once you have the SDK, you can create a new Console application with the following command:</p><div class="language-bash"><pre><code>dotnet new console <span class="token parameter variable">-n</span> RedisConsoleApp
</code></pre></div><p>After creating your Console application, navigate to the project directory:</p><div class="language-bash"><pre><code><span class="token builtin class-name">cd</span> RedisConsoleApp
</code></pre></div><p>Then, add the ServiceStack.Redis NuGet package:</p><div class="language-bash"><pre><code>dotnet <span class="token function">add</span> package ServiceStack.Redis
</code></pre></div><p>Now you have successfully added the ServiceStack.Redis library to your project. In your <code>Program.cs</code>, you can import the library using:</p><div class="language-csharp"><pre><code><span class="token keyword">using</span> <span class="token namespace">ServiceStack<span class="token punctuation">.</span>Redis</span><span class="token punctuation">;</span>
</code></pre></div><p>You are now set to start using Redis in your .NET console application.</p><h3 id="using-the-servicestack-x-tool" tabindex="-1">Using the ServiceStack <code>x</code> tool <a class="header-anchor" href="#using-the-servicestack-x-tool" aria-hidden="true">#</a></h3><p>For developers working on larger projects or who want a quicker setup, ServiceStack provides a .NET tool called <code>x</code>. You can install this tool using the following command:</p><div class="language-bash"><pre><code>dotnet tool <span class="token function">install</span> <span class="token parameter variable">--global</span> x
</code></pre></div><p>This tool allows you to create new projects and add (mix in) functionality quickly and easily. To create a new web project, you can use the following command:</p><div class="language-bash"><pre><code>x new web ProjectName
</code></pre></div><p>To add Redis support to your project, navigate to your project directory and then use the <code>mix</code> command:</p><div class="language-bash"><pre><code><span class="token builtin class-name">cd</span> ProjectName
x mix redis
</code></pre></div><p>This automatically adds the ServiceStack.Redis library to your project and sets up a basic Redis configuration.</p><p>For further information on using the <code>x</code> tool, refer to the <a href="https://docs.servicestack.net/dotnet-tool" target="_blank" rel="noopener noreferrer">ServiceStack <code>x</code> tool documentation</a>.</p><h2 id="connecting-and-using-redis-client-managers" tabindex="-1">Connecting and Using Redis Client Managers <a class="header-anchor" href="#connecting-and-using-redis-client-managers" aria-hidden="true">#</a></h2><p>In the previous section, we installed and set up the ServiceStack.Redis library in our .NET Console application. Now, let&#39;s learn how to use the Redis Client Managers provided by this library to interact with Redis.</p><p>ServiceStack.Redis provides a few different client managers, but for this tutorial, we will use <code>RedisManagerPool</code>. This client manager is a simple and efficient pool of Redis clients that is suitable for most use cases.</p><h3 id="connecting-to-redis" tabindex="-1">Connecting to Redis <a class="header-anchor" href="#connecting-to-redis" aria-hidden="true">#</a></h3><p>To start, you will first need to establish a connection to your Redis server. You can do this by passing your Redis server&#39;s connection string to the <code>RedisManagerPool</code> constructor:</p><div class="language-csharp"><pre><code><span class="token class-name"><span class="token keyword">var</span></span> manager <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">RedisManagerPool</span><span class="token punctuation">(</span><span class="token string">&quot;localhost:6379&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Now that you have a manager, you can get a Redis client instance from it:</p><div class="language-csharp"><pre><code><span class="token keyword">using</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">var</span></span> redis <span class="token operator">=</span> manager<span class="token punctuation">.</span><span class="token function">GetClient</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token comment">// You can now use \`redis\` to interact with your Redis server.</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="using-the-client-with-net-core-dependency-injection" tabindex="-1">Using the Client with .NET Core Dependency Injection <a class="header-anchor" href="#using-the-client-with-net-core-dependency-injection" aria-hidden="true">#</a></h3><p>If you are building a web application with .NET Core, you might want to make use of .NET Core&#39;s built-in dependency injection (DI) to manage your Redis clients. Here is how you can register your <code>RedisManagerPool</code> with the DI container:</p><div class="language-csharp"><pre><code><span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">ConfigureServices</span><span class="token punctuation">(</span><span class="token class-name">IServiceCollection</span> services<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    services<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">AddSingleton</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>IRedisClientsManager<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">RedisManagerPool</span><span class="token punctuation">(</span><span class="token string">&quot;localhost:6379&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// Add other services...</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Now, the DI container will manage the lifecycle of the <code>RedisManagerPool</code>, and you can inject <a href="https://reference.servicestack.net/api/ServiceStack.Redis/IRedisClientsManager/" target="_blank" rel="noopener noreferrer"><code>IRedisClientsManager</code></a> into your services:</p><div class="language-csharp"><pre><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyService</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">Service</span></span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token return-type class-name">IRedisClientsManager</span> RedisClientsManager <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Any</span><span class="token punctuation">(</span><span class="token class-name">Request</span> request<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">using</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">var</span></span> redis <span class="token operator">=</span> RedisClientsManager<span class="token punctuation">.</span><span class="token function">GetClient</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token comment">// Use \`redis\` to interact with your Redis server.</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>If you are using ServiceStack, you can simply use the <code>base.Redis</code> property from the <code>Service</code> base class to resolve a Redis client:</p><div class="language-csharp"><pre><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyService</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">Service</span></span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Any</span><span class="token punctuation">(</span><span class="token class-name">Request</span> request<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token class-name"><span class="token keyword">var</span></span> redis <span class="token operator">=</span> <span class="token keyword">base</span><span class="token punctuation">.</span>Redis<span class="token punctuation">;</span>
        <span class="token comment">// Use \`redis\` to interact with your Redis server.</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="leveraging-the-simplicity-of-icacheclient" tabindex="-1">Leveraging the Simplicity of ICacheClient <a class="header-anchor" href="#leveraging-the-simplicity-of-icacheclient" aria-hidden="true">#</a></h2><p>ServiceStack&#39;s <code>ICacheClient</code> is an abstraction over caching operations, which allows you to interact with various cache implementations in a standard way. Once <code>IRedisClientsManager</code> is registered in the IoC container, ServiceStack switches the implementation of <code>ICacheClient</code> to use Redis as its backend.</p><p>In ServiceStack services, you can easily access the cache via the <code>base.Cache</code> property of the <code>Service</code> base class. Here is an example of how you can use the <code>Get</code> and <code>Set</code> methods to work with Redis cache:</p><div class="language-csharp"><pre><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyService</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">Service</span></span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">object</span></span> <span class="token function">Any</span><span class="token punctuation">(</span><span class="token class-name">Request</span> request<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token class-name"><span class="token keyword">var</span></span> cacheKey <span class="token operator">=</span> <span class="token string">&quot;unique-cache-key&quot;</span><span class="token punctuation">;</span>
        <span class="token class-name"><span class="token keyword">var</span></span> existingValue <span class="token operator">=</span> <span class="token keyword">base</span><span class="token punctuation">.</span>Cache<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Get</span><span class="token generic class-name"><span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span>cacheKey<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">if</span> <span class="token punctuation">(</span>existingValue <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            existingValue <span class="token operator">=</span> <span class="token string">&quot;This is a value from some expensive operation&quot;</span><span class="token punctuation">;</span>
            <span class="token keyword">base</span><span class="token punctuation">.</span>Cache<span class="token punctuation">.</span><span class="token function">Set</span><span class="token punctuation">(</span>cacheKey<span class="token punctuation">,</span> existingValue<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token punctuation">{</span> Value <span class="token operator">=</span> existingValue <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>This example checks if a value is available in the cache. If the value is not present, it performs an expensive operation to get the value (in this case, we&#39;re just setting a string), then stores the value in the cache for subsequent requests.</p><p>The <code>ICacheClient</code> interface also supports asynchronous operations. If you want to use the async versions of these methods, you can use the <code>base.CacheAsync</code> property of the <code>Service</code> base class:</p><div class="language-csharp"><pre><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyService</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">Service</span></span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">async</span> <span class="token return-type class-name">Task<span class="token punctuation">&lt;</span><span class="token keyword">object</span><span class="token punctuation">&gt;</span></span> <span class="token function">Any</span><span class="token punctuation">(</span><span class="token class-name">Request</span> request<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token class-name"><span class="token keyword">var</span></span> cacheKey <span class="token operator">=</span> <span class="token string">&quot;unique-cache-key&quot;</span><span class="token punctuation">;</span>
        <span class="token class-name"><span class="token keyword">var</span></span> existingValue <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">base</span><span class="token punctuation">.</span>CacheAsync<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Get</span><span class="token generic class-name"><span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span>cacheKey<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">if</span> <span class="token punctuation">(</span>existingValue <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            existingValue <span class="token operator">=</span> <span class="token string">&quot;This is a value from some expensive operation&quot;</span><span class="token punctuation">;</span>
            <span class="token keyword">await</span> <span class="token keyword">base</span><span class="token punctuation">.</span>CacheAsync<span class="token punctuation">.</span><span class="token function">Set</span><span class="token punctuation">(</span>cacheKey<span class="token punctuation">,</span> existingValue<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token punctuation">{</span> Value <span class="token operator">=</span> existingValue <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>By using <code>ICacheClient</code>, you can make your application agnostic of the underlying cache implementation, which promotes loose coupling and makes your application easier to test and maintain. You can learn more about the <code>ICacheClient</code> interface and its usage in the <a href="/caching">Caching providers documentation</a>.</p><h2 id="using-the-redisclient-directly" tabindex="-1">Using the RedisClient Directly <a class="header-anchor" href="#using-the-redisclient-directly" aria-hidden="true">#</a></h2><p>While using <code>ICacheClient</code> provides a high-level abstraction for caching operations, there might be situations where you would need direct access to the underlying Redis client for more granular control or to perform operations not covered by the <code>ICacheClient</code> interface.</p><p>You can use <code>IRedisClient</code> to interact directly with Redis using the commands provided by the Redis server. First, let&#39;s get an instance of <code>IRedisClient</code>:</p><div class="language-csharp"><pre><code><span class="token keyword">using</span> <span class="token class-name"><span class="token keyword">var</span></span> redis <span class="token operator">=</span> clientsManager<span class="token punctuation">.</span><span class="token function">GetClient</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>In this context, <code>clientsManager</code> is an instance of <code>IRedisClientsManager</code>, which is already registered in our .NET Core application&#39;s dependency injection container.</p><p>With an instance of <code>IRedisClient</code>, we can perform similar <code>Get</code> and <code>Set</code> operations as we did with <code>ICacheClient</code>:</p><div class="language-csharp"><pre><code><span class="token class-name"><span class="token keyword">var</span></span> key <span class="token operator">=</span> <span class="token string">&quot;unique-key&quot;</span><span class="token punctuation">;</span>
<span class="token class-name"><span class="token keyword">var</span></span> existingValue <span class="token operator">=</span> redis<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Get</span><span class="token generic class-name"><span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span>existingValue <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    existingValue <span class="token operator">=</span> <span class="token string">&quot;This is a value from some expensive operation&quot;</span><span class="token punctuation">;</span>
    redis<span class="token punctuation">.</span><span class="token function">Set</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> existingValue<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>These operations directly correspond to the GET and SET commands in raw Redis:</p><div class="language-bash"><pre><code>GET unique-key
SET unique-key <span class="token string">&quot;This is a value from some expensive operation&quot;</span>
</code></pre></div><p>In addition to <code>Get</code> and <code>Set</code>, <code>IRedisClient</code> also exposes other Redis commands. For instance, you can use the <code>Increment</code> method to atomically increment the value of a key:</p><div class="language-csharp"><pre><code><span class="token class-name"><span class="token keyword">var</span></span> counterKey <span class="token operator">=</span> <span class="token string">&quot;counter&quot;</span><span class="token punctuation">;</span>
redis<span class="token punctuation">.</span><span class="token function">Increment</span><span class="token punctuation">(</span>counterKey<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>The <code>Increment</code> method corresponds to the INCR command in raw Redis:</p><div class="language-bash"><pre><code>INCR counter
</code></pre></div><p>By using <code>IRedisClient</code> directly, you have access to the entire set of Redis commands and data structures, which makes it a powerful tool for more advanced use cases. To learn more about the <code>IRedisClient</code> interface and its usage, refer to the <a href="https://reference.servicestack.net/api/ServiceStack.Redis/IRedisClient/" target="_blank" rel="noopener noreferrer">ServiceStack reference documentation site</a>.</p><h2 id="async-usability-of-servicestack-redis" tabindex="-1">Async Usability of ServiceStack.Redis <a class="header-anchor" href="#async-usability-of-servicestack-redis" aria-hidden="true">#</a></h2><p>One of the great strengths of the ServiceStack.Redis library is its comprehensive support for asynchronous operations via the <code>async</code>/<code>await</code> paradigm in .NET. This allows developers to perform non-blocking I/O operations with Redis, freeing up system resources and improving the efficiency and scalability of your application.</p><p>To make use of asynchronous operations, you&#39;ll want to get an instance of <code>IRedisClientAsync</code>:</p><div class="language-csharp"><pre><code><span class="token keyword">using</span> <span class="token class-name"><span class="token keyword">var</span></span> redisAsync <span class="token operator">=</span> <span class="token keyword">await</span> clientsManager<span class="token punctuation">.</span><span class="token function">GetClientAsync</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>In this context, <code>clientsManager</code> is an instance of <code>IRedisClientsManager</code>, which is already registered in our .NET Core application&#39;s dependency injection container.</p><p>Once you have an instance of <code>IRedisClientAsync</code>, you can perform async versions of the usual Redis operations. For instance:</p><div class="language-csharp"><pre><code><span class="token class-name"><span class="token keyword">var</span></span> key <span class="token operator">=</span> <span class="token string">&quot;unique-key&quot;</span><span class="token punctuation">;</span>
<span class="token class-name"><span class="token keyword">var</span></span> existingValue <span class="token operator">=</span> <span class="token keyword">await</span> redisAsync<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetAsync</span><span class="token generic class-name"><span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span>existingValue <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    existingValue <span class="token operator">=</span> <span class="token string">&quot;This is a value from some expensive operation&quot;</span><span class="token punctuation">;</span>
    <span class="token keyword">await</span> redisAsync<span class="token punctuation">.</span><span class="token function">SetAsync</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> existingValue<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>These operations are non-blocking and make use of the Task-based Asynchronous Pattern (TAP) in .NET. This means you can perform other work while waiting for the Redis operations to complete, improving the responsiveness of your application. This is particularly beneficial in web applications, where efficient handling of requests is critical for performance.</p><p>ServiceStack.Redis async support makes interacting with Redis from .NET applications familiar and straightforward, aligning with the asynchronous programming model in .NET. As such, you can leverage all the benefits of async/await while interacting with Redis in a manner consistent with the rest of your .NET codebase.</p><h2 id="storing-complex-objects-strongly-typed-client-api" tabindex="-1">Storing Complex Objects: Strongly Typed Client API <a class="header-anchor" href="#storing-complex-objects-strongly-typed-client-api" aria-hidden="true">#</a></h2><p>One of the many powerful features of ServiceStack.Redis library is its support for storing complex objects using the Strongly Typed Client API. This feature provides a more natural and convenient way to work with custom Plain Old CLR Objects (POCOs) and data structures in Redis.</p><p>To use the Strongly Typed Client API, we start by obtaining an instance of the <code>IRedisTypedClient&lt;T&gt;</code>, which can be done using the <code>As&lt;T&gt;</code> method from an <code>IRedisClient</code> instance. Let&#39;s assume that we have a <code>Person</code> class defined as follows:</p><div class="language-csharp"><pre><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Person</span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> Id <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> Name <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> Age <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>To store an instance of the <code>Person</code> class in Redis, we can do the following:</p><div class="language-csharp"><pre><code><span class="token keyword">using</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">var</span></span> redis <span class="token operator">=</span> clientsManager<span class="token punctuation">.</span><span class="token function">GetClient</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token class-name"><span class="token keyword">var</span></span> redisPeople <span class="token operator">=</span> redis<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">As</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Person<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name"><span class="token keyword">var</span></span> person <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Person</span>
    <span class="token punctuation">{</span>
        Id <span class="token operator">=</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span>
        Name <span class="token operator">=</span> <span class="token string">&quot;John Doe&quot;</span><span class="token punctuation">,</span>
        Age <span class="token operator">=</span> <span class="token number">30</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>

    redisPeople<span class="token punctuation">.</span><span class="token function">Store</span><span class="token punctuation">(</span>person<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>In this example, the <code>redisPeople</code> variable is an instance of <code>IRedisTypedClient&lt;Person&gt;</code>. We can use this instance to call the <code>Store</code> method and save our <code>Person</code> instance to Redis. The ServiceStack.Redis library automatically handles the serialization and deserialization of our POCO.</p><p>Retrieving our <code>Person</code> instance is just as straightforward:</p><div class="language-csharp"><pre><code><span class="token keyword">using</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">var</span></span> redis <span class="token operator">=</span> clientsManager<span class="token punctuation">.</span><span class="token function">GetClient</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token class-name"><span class="token keyword">var</span></span> redisPeople <span class="token operator">=</span> redis<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">As</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Person<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name"><span class="token keyword">var</span></span> person <span class="token operator">=</span> redisPeople<span class="token punctuation">.</span><span class="token function">GetById</span><span class="token punctuation">(</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">$&quot;Name: </span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">person<span class="token punctuation">.</span>Name</span><span class="token punctuation">}</span></span><span class="token string">, Age: </span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">person<span class="token punctuation">.</span>Age</span><span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Here we used the <code>GetById</code> method from our <code>redisPeople</code> instance to retrieve the person with the <code>Id</code> &quot;1&quot; from Redis.</p><p>This way of working with complex objects in Redis using ServiceStack.Redis makes it seamless to integrate Redis into your .NET applications, as it aligns with .NET&#39;s object-oriented approach.</p><p>In the previous examples, we used the <code>Store</code> method of <code>IRedisTypedClient&lt;T&gt;</code> to store an instance of <code>Person</code> into Redis, and the <code>GetById</code> method to retrieve it. One important thing to note is that these methods automatically handle the generation of the key for Redis.</p><p>The key is generated based on the namespace and the class name of the object being stored, followed by the value of the primary key. This means that when you use <code>Store</code>, ServiceStack.Redis takes care of creating a key like <code>urn:Person:1</code> for a <code>Person</code> instance with an <code>Id</code> of &quot;1&quot;. This pattern also applies when retrieving data with <code>GetById</code>; ServiceStack.Redis knows to look for a key following this pattern.</p><p>This feature is particularly useful when used in combination with ServiceStack&#39;s OrmLite, a convention-based, configuration-free lightweight ORM. With OrmLite, you can use the same POCO classes for both your database and Redis operations. The automatic key generation from ServiceStack.Redis aligns with OrmLite&#39;s conventions, providing a consistent and intuitive pattern for data storage and retrieval across both systems. This alleviates the need to manually manage keys, allowing developers to focus on working with their data in a more natural, object-oriented manner.</p><p>For more information about ServiceStack&#39;s OrmLite, check the <a href="https://docs.servicestack.net/ormlite/" target="_blank" rel="noopener noreferrer">ServiceStack.OrmLite documentation</a>.</p><h2 id="working-with-redis-data-structures" tabindex="-1">Working with Redis Data Structures <a class="header-anchor" href="#working-with-redis-data-structures" aria-hidden="true">#</a></h2><p>In Redis, one of the powerful features is its support for different types of data structures. While key-value storage is fundamental, Redis goes beyond this and provides the ability to manipulate lists, sets, sorted sets, and hashes as well.</p><p>ServiceStack.Redis library provides an intuitive interface to work with these data structures in a way that feels familiar to .NET developers. This is achieved through properties exposed on the <code>IRedisClient</code> interface, each corresponding to one of Redis&#39;s data structures.</p><p>Here are examples of how to interact with Lists, Sets, and SortedSets using ServiceStack.Redis:</p><h3 id="lists" tabindex="-1">Lists <a class="header-anchor" href="#lists" aria-hidden="true">#</a></h3><p>A Redis list is a simple list of strings, sorted by insertion order. You can work with lists in ServiceStack.Redis through the <code>Lists</code> property.</p><div class="language-csharp"><pre><code><span class="token class-name"><span class="token keyword">var</span></span> redis <span class="token operator">=</span> redisManager<span class="token punctuation">.</span><span class="token function">GetClient</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Add new elements to a Redis list</span>
redis<span class="token punctuation">.</span>Lists<span class="token punctuation">[</span><span class="token string">&quot;urn:mylist&quot;</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token string">&quot;item1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
redis<span class="token punctuation">.</span>Lists<span class="token punctuation">[</span><span class="token string">&quot;urn:mylist&quot;</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token string">&quot;item2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Fetch all elements in the list</span>
<span class="token class-name"><span class="token keyword">var</span></span> myList <span class="token operator">=</span> redis<span class="token punctuation">.</span>Lists<span class="token punctuation">[</span><span class="token string">&quot;urn:mylist&quot;</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">GetAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="sets" tabindex="-1">Sets <a class="header-anchor" href="#sets" aria-hidden="true">#</a></h3><p>A Redis set is an unordered collection of unique strings. In ServiceStack.Redis, you can work with sets through the <code>Sets</code> property.</p><div class="language-csharp"><pre><code><span class="token class-name"><span class="token keyword">var</span></span> redis <span class="token operator">=</span> redisManager<span class="token punctuation">.</span><span class="token function">GetClient</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Add new elements to a Redis set</span>
redis<span class="token punctuation">.</span>Sets<span class="token punctuation">[</span><span class="token string">&quot;urn:myset&quot;</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token string">&quot;item1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
redis<span class="token punctuation">.</span>Sets<span class="token punctuation">[</span><span class="token string">&quot;urn:myset&quot;</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token string">&quot;item2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Check if an item exists in the set</span>
<span class="token class-name"><span class="token keyword">bool</span></span> exists <span class="token operator">=</span> redis<span class="token punctuation">.</span>Sets<span class="token punctuation">[</span><span class="token string">&quot;urn:myset&quot;</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">Contains</span><span class="token punctuation">(</span><span class="token string">&quot;item1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="sorted-sets" tabindex="-1">Sorted Sets <a class="header-anchor" href="#sorted-sets" aria-hidden="true">#</a></h3><p>A Redis sorted set is similar to a regular set, but each value is associated with a score, which is used to sort the set. It&#39;s through the <code>SortedSets</code> property that ServiceStack.Redis allows interaction with sorted sets.</p><div class="language-csharp"><pre><code><span class="token class-name"><span class="token keyword">var</span></span> redis <span class="token operator">=</span> redisManager<span class="token punctuation">.</span><span class="token function">GetClient</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Works with TypedClients as well.</span>
<span class="token class-name"><span class="token keyword">var</span></span> typedClient <span class="token operator">=</span> redis<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">As</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>MyClass<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Add new elements to a Redis sorted set</span>
typedClient<span class="token punctuation">.</span>SortedSets<span class="token punctuation">[</span><span class="token string">&quot;urn:mysortedset&quot;</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">MyClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
typedClient<span class="token punctuation">.</span>SortedSets<span class="token punctuation">[</span><span class="token string">&quot;urn:mysortedset&quot;</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">MyClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Fetch all elements in the sorted set</span>
<span class="token class-name"><span class="token keyword">var</span></span> mySortedSet <span class="token operator">=</span> typedClient<span class="token punctuation">.</span>SortedSets<span class="token punctuation">[</span><span class="token string">&quot;urn:mysortedset&quot;</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">GetAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>As you can see, ServiceStack.Redis makes it easy to work with Redis data structures in a manner that&#39;s familiar to .NET developers. With these powerful features at your disposal, you can implement complex data storage and retrieval operations with ease. For a deeper dive into these data structures and their usage, please refer to the <a href="https://redis.io/docs/data-types/tutorial/" target="_blank" rel="noopener noreferrer">Redis data types documentation</a>.</p><h2 id="conclusion-the-power-of-redis-and-servicestack-redis" tabindex="-1">Conclusion: The Power of Redis and ServiceStack.Redis <a class="header-anchor" href="#conclusion-the-power-of-redis-and-servicestack-redis" aria-hidden="true">#</a></h2><p>Throughout this tutorial, we&#39;ve explored the basics of Redis as a technology and have seen how the ServiceStack.Redis library can make interacting with Redis from a .NET environment feel natural and intuitive. However, what we&#39;ve covered just scratches the surface of what can be achieved with this powerful combination.</p><p>With Redis, we have at our disposal a high-performance, feature-rich in-memory database that supports various data structures. Combined with the real-time data replication, persistence options, and high availability features, Redis is a versatile tool that can suit a wide array of application needs.</p><p>On the other hand, ServiceStack.Redis bridges the gap between the .NET ecosystem and Redis. Its ability to leverage .NET&#39;s async/await syntax, work with complex POCO objects, manage connections efficiently, and provide an idiomatic interface to Redis&#39;s data structures, truly makes it a powerful tool for any .NET developer looking to utilize Redis.</p><p>If you have suggestions, corrections, or ideas to improve this content, please do share them. Your insights will help us refine this tutorial and better serve readers like you. You can reach out to us via Discord, GitHub Discussions or our Customer Forums.</p>`,131),u=[r,l];function d(k,h,g,y,m,f){return a(),e("div",null,u)}var b=s(i,[["render",d]]);export{w as __pageData,b as default};
