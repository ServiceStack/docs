<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Auth Repository | Documentation</title>
    <meta name="description" content="ServiceStack Docs">
    <link rel="stylesheet" href="/assets/style.896ab636.css">
    <link rel="modulepreload" href="/assets/chunks/TypeSenseDialog.f29265fe.js">
    <link rel="modulepreload" href="/assets/chunks/KeyboardEvents.c24a9fe0.js">
    <link rel="modulepreload" href="/assets/chunks/users-edit-default.473d8bf8.js">
    <link rel="modulepreload" href="/assets/app.27fe150c.js">
    <link rel="modulepreload" href="/assets/auth-repository.md.70c598bc.lean.js">
    
    <script src="/custom.js"></script>
  <script type="module" src="/custom.mjs"></script>
  <meta name="twitter:title" content="Auth Repository | Documentation">
  <meta property="og:title" content="Auth Repository | Documentation">
  </head>
  <body>
    <div id="app"><div><!----><!--[--><div class="theme"><header class="nav-bar" data-v-675d8756><div class="sidebar-button" data-v-675d8756><svg class="icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z" class></path></svg></div><a class="nav-bar-title" href="/" aria-label="Documentation, back to home" data-v-675d8756 data-v-cc01ef16><!----> Documentation</a><div class="flex-grow" data-v-675d8756></div><div class="nav" data-v-675d8756><nav class="nav-links" data-v-675d8756 data-v-eab3edfe><!--[--><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item" href="/templates-overview" data-v-b8818f8c>Project Templates <!----></a></div></div><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item" href="/vue/" data-v-b8818f8c>Vue <!----></a></div></div><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item" href="/autoquery" data-v-b8818f8c>AutoQuery <!----></a></div></div><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item" href="/locode/" data-v-b8818f8c>Locode <!----></a></div></div><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item active" href="/auth" data-v-b8818f8c>Security <!----></a></div></div><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item" href="/grpc" data-v-b8818f8c>gRPC <!----></a></div></div><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item" href="/ormlite/" data-v-b8818f8c>OrmLite <!----></a></div></div><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item" href="/redis/" data-v-b8818f8c>Redis <!----></a></div></div><!--]--><!----><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item isExternal" href="https://github.com/ServiceStack/docs" target="_blank" rel="noopener noreferrer" data-v-b8818f8c>GitHub <svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-b8818f8c><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div></nav></div><!--[--><!--[--><button class="flex rounded-full p-0 bg-gray-100 border-solid border-gray-100 text-gray-400 cursor-pointer hover:border-green-400 hover:bg-white hover:text-gray-600"><svg class="w-7 h-7 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16l2.879-2.879m0 0a3 3 0 104.243-4.242 3 3 0 00-4.243 4.242zM21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg><span class="text-lg mr-1">Search</span><span style="opacity:1;" class="hidden sm:block text-gray-400 text-sm leading-5 py-0 px-1.5 my-0.5 mr-1.5 border border-gray-300 border-solid rounded-md"><span class="sr-only">Press </span><kbd class="font-sans">/</kbd><span class="sr-only"> to search</span></span></button><!--]--><!--]--></header><aside class="sidebar" data-v-83e92a68><nav class="nav-links nav" data-v-83e92a68 data-v-eab3edfe><!--[--><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item" href="/templates-overview" data-v-b8818f8c>Project Templates <!----></a></div></div><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item" href="/vue/" data-v-b8818f8c>Vue <!----></a></div></div><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item" href="/autoquery" data-v-b8818f8c>AutoQuery <!----></a></div></div><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item" href="/locode/" data-v-b8818f8c>Locode <!----></a></div></div><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item active" href="/auth" data-v-b8818f8c>Security <!----></a></div></div><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item" href="/grpc" data-v-b8818f8c>gRPC <!----></a></div></div><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item" href="/ormlite/" data-v-b8818f8c>OrmLite <!----></a></div></div><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item" href="/redis/" data-v-b8818f8c>Redis <!----></a></div></div><!--]--><!----><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item isExternal" href="https://github.com/ServiceStack/docs" target="_blank" rel="noopener noreferrer" data-v-b8818f8c>GitHub <svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-b8818f8c><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div></nav><!--[--><!--]--><ul class="sidebar-links" data-v-83e92a68><!--[--><li class="sidebar-link"><p class="sidebar-link-item">Security</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/auth">Overview</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/authentication-and-authorization">Authentication &amp; Authorization</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item active" href="/auth-repository">Auth Repository</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#extending-userauth-tables">Extending UserAuth tables</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#adding-additional-metadata-to-the-meta-dictionary-fields">Adding additional metadata to the Meta dictionary fields</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#linking-referential-data-with-refid-and-refidstr-fields">Linking referential data with RefId and RefIdStr fields</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#extend-userauthsession-with-your-own-typed-custom-session">Extend UserAuthSession with your own typed Custom Session</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#iauthrepository-apis">IAuthRepository APIs</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#updating-userauth-tables-directly">Updating UserAuth tables directly</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#imanageroles-api">IManageRoles API</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#assigning-roles-and-permissions">Assigning Roles and Permissions</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#customizing-user-roles-and-permissions">Customizing User Roles and Permissions</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#microsoft-graph-roles">Microsoft Graph Roles</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#pbkdf2-password-hashing-implementation">PBKDF2 Password Hashing implementation</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#digest-auth-hashes-only-created-when-needed">Digest Auth Hashes only created when needed</a><!----></li></ul></li></ul></li><li class="sidebar-link"><a class="sidebar-link-item" href="/authentication-identity-servicestack">Using ServiceStack Auth in MVC</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/authentication-identity-aspnet">Using ASP.NET Identity Auth</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/authentication-identityserver">Using IdentityServer4 Auth</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/sessions">Sessions</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/jwt-authprovider">JWT AuthProvider</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/api-key-authprovider">API Key AuthProvider</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/auth-signin-with-apple">Sign in with Apple AuthProvider</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/auth-restricting-services">Restricting Services</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/encrypted-messaging">Encrypted Messaging</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/auth-anti-forgery">Anti Forgery</a><!----></li></ul></li><!--]--></ul><!--[--><!--]--></aside><div class="sidebar-mask"></div><main class="page" data-v-7eddb2c4><div class="container" data-v-7eddb2c4><!--[--><!--[--><!----><!--]--><!--[--><h1>Auth Repository</h1><!--]--><!--]--><div style="position:relative;" class="content" data-v-7eddb2c4><div><p>ServiceStack Auth supports using your own persistence back-ends but for the most part you should be able to reuse one of the existing <a href="https://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack/Auth/IAuthRepository.cs" target="_blank" rel="noopener noreferrer">IAuthRepository</a>:</p><ul><li><strong>OrmLite</strong>: <code>OrmLiteAuthRepository</code> in <a href="https://nuget.org/packages/ServiceStack.Server" target="_blank" rel="noopener noreferrer">ServiceStack.Server</a><ul><li><a href="/multitenancy#multitenancy-rdbms-authprovider">OrmLiteAuthRepositoryMultitenancy</a></li></ul></li><li><strong>Redis</strong>: <code>RedisAuthRepository</code> in <a href="https://nuget.org/packages/ServiceStack" target="_blank" rel="noopener noreferrer">ServiceStack</a></li><li><strong>Memory</strong>: <code>InMemoryAuthRepository</code> in <a href="https://nuget.org/packages/ServiceStack" target="_blank" rel="noopener noreferrer">ServiceStack</a></li><li><strong>AWS DynamoDB</strong>: <code>DynamoDbAuthRepository</code> in <a href="https://nuget.org/packages/ServiceStack.Aws" target="_blank" rel="noopener noreferrer">ServiceStack.Aws</a></li><li><strong>Mongo DB</strong>: <code>MongoDBAuthRepository</code> in <a href="https://nuget.org/packages/ServiceStack.Authentication.MongoDB" target="_blank" rel="noopener noreferrer">ServiceStack.Authentication.MongoDB</a></li><li><strong>Raven DB</strong>: <code>RavenUserAuthRepository</code> in <a href="https://nuget.org/packages/ServiceStack.Authentication.RavenDB" target="_blank" rel="noopener noreferrer">ServiceStack.Authentication.RavenDB</a></li><li><strong>Marten</strong>: <code>MartenAuthRepository</code> in <a href="https://www.nuget.org/packages/ServiceStack.Authentication.Marten" target="_blank" rel="noopener noreferrer">ServiceStack.Authentication.Marten</a> - <a href="https://github.com/migajek/ServiceStack.Authentication.Marten" target="_blank" rel="noopener noreferrer">GitHub project</a></li><li><strong>LiteDB</strong>: <code>LiteDBAuthRepository</code> in <a href="https://github.com/CaveBirdLabs/ServiceStack.Authentication.LiteDB" target="_blank" rel="noopener noreferrer">ServiceStack.Authentication.LiteDB</a></li></ul><h4 id="registering-an-auth-repository" tabindex="-1">Registering an Auth Repository <a class="header-anchor" href="#registering-an-auth-repository" aria-hidden="true">#</a></h4><p>The <code>OrmLiteAuthRepository</code> is the most common Auth Repository which will let you persist User Info in any of the <a href="/ormlite/#ormlite-rdbms-providers">RDBMS&#39;s that OrmLite supports</a>. All Auth Repositories are registered by adding a <code>IAuthRepository</code> dependency in your IOC, e.g:</p><div class="language-csharp"><pre><code>container<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Register</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>IDbConnectionFactory<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span>c <span class="token operator">=&gt;</span>
    <span class="token keyword">new</span> <span class="token constructor-invocation class-name">OrmLiteConnectionFactory</span><span class="token punctuation">(</span>connectionString<span class="token punctuation">,</span> SqlServer2012Dialect<span class="token punctuation">.</span>Provider<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

container<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Register</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>IAuthRepository<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span>c <span class="token operator">=&gt;</span>
    <span class="token keyword">new</span> <span class="token constructor-invocation class-name">OrmLiteAuthRepository</span><span class="token punctuation">(</span>c<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Resolve</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>IDbConnectionFactory<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

container<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Resolve</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>IAuthRepository<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">InitSchema</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Calling <code>InitSchema()</code> will create the necessary RDBMS <code>UserAuth</code> and <code>UserAuthDetails</code> tables if they don&#39;t already exist. By default the Users Roles and Permissions are blobbed on the <code>UserAuth</code> table, but if preferred they can optionally be maintained in a separate <code>UserAuthRole</code> table with:</p><div class="language-csharp"><pre><code>container<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Register</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>IAuthRepository<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span>c <span class="token operator">=&gt;</span>
    <span class="token keyword">new</span> <span class="token constructor-invocation class-name">OrmLiteAuthRepository</span><span class="token punctuation">(</span>c<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Resolve</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>IDbConnectionFactory<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        UseDistinctRoleTables <span class="token operator">=</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Like the <a href="/caching">caching providers</a> the <code>async</code> Auth Repositories makes use of this existing <code>IAuthRepository</code> registration which you can use in your Services to access either <code>IAuthRepositoryAsync</code> or <code>IAuthRepository</code> APIs above even for your own sync Auth Repos that only implement <code>IAuthRepository</code> as it will return a <code>IAuthRepositoryAsync</code> wrapper API in its place.</p><h3 id="auth-repository-admin-apis" tabindex="-1">Auth Repository Admin APIs <a class="header-anchor" href="#auth-repository-admin-apis" aria-hidden="true">#</a></h3><p>If you&#39;re interested in implementing a User Management feature in your own Apps you may want to re-use the Admin APIs in the <a href="/admin-ui-users">User Admin Feature</a> which enable Service access to many User Auth Repository features.</p><h3 id="mix-in-auth-repository" tabindex="-1">Mix in Auth Repository <a class="header-anchor" href="#mix-in-auth-repository" aria-hidden="true">#</a></h3><p>The easiest way to configure a User Auth Repository in your <a href="/modular-startup">Modular Startup</a> App that new <a href="http://ASP.NET" target="_blank" rel="noopener noreferrer">ASP.NET</a> Core templates support is to <a href="/mix-tool#composable-features">mix them in</a>, e.g. you can configure to use an OrmLiteAuthRepository using SQL Server with:</p><div class="sh-copy cp flex cursor-pointer mb-3" onclick="copy(this)"><div class="flex-grow bg-gray-800"><div class="pl-4 py-1 pb-1.5 align-middle whitespace-pre text-base text-gray-100"><p>x mix auth-db sqlserver</p></div></div><div class="flex"><div class="bg-green-600 text-white p-1.5 pb-0"><svg class="copied w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg><svg class="nocopy w-6 h-6" title="copy" fill="none" stroke="white" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1" d="M8 7v8a2 2 0 002 2h6M8 7V5a2 2 0 012-2h4.586a1 1 0 01.707.293l4.414 4.414a1 1 0 01.293.707V15a2 2 0 01-2 2h-2M8 7H6a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2v-2"></path></svg></div></div></div><p>You can view other Auth Repository &quot;mix ins&quot; available with:</p><div class="sh-copy cp flex cursor-pointer mb-3" onclick="copy(this)"><div class="flex-grow bg-gray-800"><div class="pl-4 py-1 pb-1.5 align-middle whitespace-pre text-base text-gray-100"><p>x mix [auth]</p></div></div><div class="flex"><div class="bg-green-600 text-white p-1.5 pb-0"><svg class="copied w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg><svg class="nocopy w-6 h-6" title="copy" fill="none" stroke="white" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1" d="M8 7v8a2 2 0 002 2h6M8 7V5a2 2 0 012-2h4.586a1 1 0 01.707.293l4.414 4.414a1 1 0 01.293.707V15a2 2 0 01-2 2h-2M8 7H6a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2v-2"></path></svg></div></div></div><p>Which displays the current list of available Auth Repositories:</p><div class="language-"><pre><code>Results matching tag [auth]:

   1. auth              Configure AuthFeature                        to: $HOST  by @ServiceStack [auth]
   2. auth-db           Use OrmLite Auth Repository (requires auth)  to: $HOST  by @ServiceStack [auth]
   3. auth-redis        Use Redis Auth Repository (requires auth)    to: $HOST  by @ServiceStack [auth]
   4. auth-memory       Use Memory Auth Repository (requires auth)   to: $HOST  by @ServiceStack [auth]
   5. auth-dynamodb     Use DynamoDB Auth Repository (requires auth) to: $HOST  by @ServiceStack [auth]
   6. auth-mongodb      Use MongoDB Auth Repository (requires auth)  to: $HOST  by @ServiceStack [auth]
   7. auth-ravendb      Use RavenDB Auth Repository (requires auth)  to: $HOST  by @ServiceStack [auth]
   8. auth-marten       Use Marten Auth Repository (requires auth)   to: $HOST  by @ServiceStack [auth]
   9. feature-authrepo  List and Search Users in an Auth Repo        to: $HOST  by @ServiceStack [feature,auth]
</code></pre></div><p>and search the available RDBMS&#39;s and NoSQL Data Stores:</p><div class="sh-copy cp flex cursor-pointer mb-3" onclick="copy(this)"><div class="flex-grow bg-gray-800"><div class="pl-4 py-1 pb-1.5 align-middle whitespace-pre text-base text-gray-100"><p>x mix [db]</p></div></div><div class="flex"><div class="bg-green-600 text-white p-1.5 pb-0"><svg class="copied w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg><svg class="nocopy w-6 h-6" title="copy" fill="none" stroke="white" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1" d="M8 7v8a2 2 0 002 2h6M8 7V5a2 2 0 012-2h4.586a1 1 0 01.707.293l4.414 4.414a1 1 0 01.293.707V15a2 2 0 01-2 2h-2M8 7H6a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2v-2"></path></svg></div></div></div><p>That can be easily configured by a mix in:</p><div class="language-"><pre><code>Results matching tag [db]:

   1. redis      Use ServiceStack.Redis            to: $HOST  by @ServiceStack  [db]
   2. sqlserver  Use OrmLite with SQL Server       to: $HOST  by @ServiceStack  [db]
   3. sqlite     Use OrmLite with SQLite           to: $HOST  by @ServiceStack  [db]
   4. postgres   Use OrmLite with PostgreSQL       to: $HOST  by @ServiceStack  [db]
   5. mysql      Use OrmLite with MySql            to: $HOST  by @ServiceStack  [db]
   6. oracle     Use OrmLite with Oracle           to: $HOST  by @ServiceStack  [db]
   7. firebird   Use OrmLite with Firebird         to: $HOST  by @ServiceStack  [db]
   8. dynamodb   Use AWS DynamoDB and PocoDynamo   to: $HOST  by @ServiceStack  [db]
   9. mongodb    Use MongoDB                       to: $HOST  by @ServiceStack  [db]
  10. ravendb    Use RavenDB                       to: $HOST  by @ServiceStack  [db]
  11. marten     Use Marten NoSQL with PostgreSQL  to: $HOST  by @ServiceStack  [db]
</code></pre></div><h3 id="sync-async-auth-repositories" tabindex="-1">Sync &amp; Async Auth Repositories <a class="header-anchor" href="#sync-async-auth-repositories" aria-hidden="true">#</a></h3><p>All built-in ServiceStack Auth Repositories implement both <code>IUserAuthRepository</code> and <code>IUserAuthRepositoryAsync</code> which you can use inside ServiceStack Services with the <code>AuthRepositoryAsync</code> property, e.g:</p><div class="language-csharp"><pre><code><span class="token comment">//async</span>
<span class="token keyword">public</span> <span class="token keyword">async</span> <span class="token return-type class-name">Task<span class="token punctuation">&lt;</span><span class="token keyword">object</span><span class="token punctuation">&gt;</span></span> <span class="token function">Post</span><span class="token punctuation">(</span><span class="token class-name">GetUserAuth</span> request<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token class-name"><span class="token keyword">var</span></span> userAuth <span class="token operator">=</span> <span class="token keyword">await</span> AuthRepositoryAsync<span class="token punctuation">.</span><span class="token function">GetUserAuthByUserNameAsync</span><span class="token punctuation">(</span>request<span class="token punctuation">.</span>UserName<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>userAuth <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
        <span class="token keyword">throw</span> HttpError<span class="token punctuation">.</span><span class="token function">NotFound</span><span class="token punctuation">(</span>request<span class="token punctuation">.</span>UserName<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> userAuth<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//sync</span>
<span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">object</span></span> <span class="token function">Post</span><span class="token punctuation">(</span><span class="token class-name">GetUserAuth</span> request<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token class-name"><span class="token keyword">var</span></span> userAuth <span class="token operator">=</span> AuthRepository<span class="token punctuation">.</span><span class="token function">GetUserAuthByUserName</span><span class="token punctuation">(</span>request<span class="token punctuation">.</span>UserName<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>userAuth <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
        <span class="token keyword">throw</span> HttpError<span class="token punctuation">.</span><span class="token function">NotFound</span><span class="token punctuation">(</span>request<span class="token punctuation">.</span>UserName<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> userAuth<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Outside of ServiceStack you can access it from the AppHost <code>GetAuthRepositoryAsync()</code> or <code>GetAuthRepository()</code> APIs, e.g:</p><div class="language-csharp"><pre><code><span class="token comment">//async</span>
<span class="token class-name"><span class="token keyword">var</span></span> authRepo <span class="token operator">=</span> HostContext<span class="token punctuation">.</span>AppHost<span class="token punctuation">.</span><span class="token function">GetAuthRepositoryAsync</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">await</span> <span class="token keyword">using</span> <span class="token punctuation">(</span>authRepo <span class="token keyword">as</span> <span class="token class-name">IAsyncDisposable</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token comment">//...</span>
<span class="token punctuation">}</span>

<span class="token comment">//sync</span>
<span class="token class-name"><span class="token keyword">var</span></span> authRepo <span class="token operator">=</span> HostContext<span class="token punctuation">.</span>AppHost<span class="token punctuation">.</span><span class="token function">GetAuthRepository</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token punctuation">(</span>authRepo <span class="token keyword">as</span> <span class="token class-name">IDisposable</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token comment">//...</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="extending-userauth-tables" tabindex="-1">Extending UserAuth tables <a class="header-anchor" href="#extending-userauth-tables" aria-hidden="true">#</a></h2><p>There are a number of different extensibility options for extending ServiceStack Authentication by linking to external tables with its <code>RefId</code> and <code>RefIdStr</code> fields or storing custom info in the <code>Meta</code> Dictionaries.</p><p>Most Auth Repositories like OrmLite also supports utilizing custom <code>UserAuth</code> tables with extended fields which can be configured using its generic Constructor, e.g:</p><div class="language-csharp"><pre><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyUserAuth</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">UserAuth</span></span> <span class="token punctuation">{</span> <span class="token range operator">..</span><span class="token range operator">..</span> <span class="token punctuation">}</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyUserAuthDetails</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">UserAuthDetails</span></span> <span class="token punctuation">{</span> <span class="token range operator">..</span><span class="token range operator">..</span> <span class="token punctuation">}</span>
</code></pre></div><div class="language-csharp"><pre><code>container<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Register</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>IAuthRepository<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span>c <span class="token operator">=&gt;</span>
    <span class="token keyword">new</span> <span class="token constructor-invocation class-name">OrmLiteAuthRepository<span class="token punctuation">&lt;</span>MyUserAuth<span class="token punctuation">,</span> MyUserAuthDetails<span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>c<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Resolve</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>IDbConnectionFactory<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        UseDistinctRoleTables <span class="token operator">=</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>The <a href="/mix-tool#mix-in-auth-repository">Auth Repository mix gists</a> are configured with an example using a custom <code>AppUser</code> table which are populated using the <a href="/sessions#session-events">Session and Auth Events</a> hooks, e.g:</p><div class="language-csharp"><pre><code><span class="token comment">// Custom User Table with extended Metadata properties</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AppUser</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">UserAuth</span></span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> ProfileUrl <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> LastLoginIp <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token return-type class-name">DateTime<span class="token punctuation">?</span></span> LastLoginDate <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AppUserAuthEvents</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">AuthEvents</span></span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">override</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">OnAuthenticated</span><span class="token punctuation">(</span><span class="token class-name">IRequest</span> req<span class="token punctuation">,</span> <span class="token class-name">IAuthSession</span> session<span class="token punctuation">,</span> <span class="token class-name">IServiceBase</span> authService<span class="token punctuation">,</span> 
        <span class="token class-name">IAuthTokens</span> tokens<span class="token punctuation">,</span> <span class="token class-name">Dictionary<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">,</span> <span class="token keyword">string</span><span class="token punctuation">&gt;</span></span> authInfo<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token class-name"><span class="token keyword">var</span></span> authRepo <span class="token operator">=</span> HostContext<span class="token punctuation">.</span>AppHost<span class="token punctuation">.</span><span class="token function">GetAuthRepository</span><span class="token punctuation">(</span>req<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">using</span> <span class="token punctuation">(</span>authRepo <span class="token keyword">as</span> <span class="token class-name">IDisposable</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token class-name"><span class="token keyword">var</span></span> userAuth <span class="token operator">=</span> <span class="token punctuation">(</span>AppUser<span class="token punctuation">)</span>authRepo<span class="token punctuation">.</span><span class="token function">GetUserAuth</span><span class="token punctuation">(</span>session<span class="token punctuation">.</span>UserAuthId<span class="token punctuation">)</span><span class="token punctuation">;</span>
            userAuth<span class="token punctuation">.</span>ProfileUrl <span class="token operator">=</span> session<span class="token punctuation">.</span><span class="token function">GetProfileUrl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            userAuth<span class="token punctuation">.</span>LastLoginIp <span class="token operator">=</span> req<span class="token punctuation">.</span>UserHostAddress<span class="token punctuation">;</span>
            userAuth<span class="token punctuation">.</span>LastLoginDate <span class="token operator">=</span> DateTime<span class="token punctuation">.</span>UtcNow<span class="token punctuation">;</span>
            authRepo<span class="token punctuation">.</span><span class="token function">SaveUserAuth</span><span class="token punctuation">(</span>userAuth<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="custom-userauth-tables" tabindex="-1">Custom UserAuth Tables <a class="header-anchor" href="#custom-userauth-tables" aria-hidden="true">#</a></h4><p>If you want to add support for custom <code>UserAuth</code> and <code>UserAuthDetails</code> tables in your own custom Auth Repositories you&#39;ll need to implement the <code>ICustomUserAuth</code> interface by returning the concrete Type that should be used instead:</p><div class="language-csharp"><pre><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">ICustomUserAuth</span>
<span class="token punctuation">{</span>
    <span class="token return-type class-name">IUserAuth</span> <span class="token function">CreateUserAuth</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token return-type class-name">IUserAuthDetails</span> <span class="token function">CreateUserAuthDetails</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>If implementing a generic class like <code>OrmLiteAuthRepository&lt;TUserAuth,TUserAuthDetails&gt;</code> you can return new instances of the Generic Type Arguments with:</p><div class="language-csharp"><pre><code><span class="token return-type class-name">IUserAuth</span> <span class="token function">CreateUserAuth</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>IUserAuth<span class="token punctuation">)</span><span class="token keyword">typeof</span><span class="token punctuation">(</span><span class="token type-expression class-name">TUserAuth</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">CreateInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token return-type class-name">IUserAuthDetails</span> <span class="token function">CreateUserAuthDetails</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>IUserAuthDetails<span class="token punctuation">)</span><span class="token keyword">typeof</span><span class="token punctuation">(</span><span class="token type-expression class-name">TUserAuthDetails</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">CreateInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="adding-additional-metadata-to-the-meta-dictionary-fields" tabindex="-1">Adding additional metadata to the Meta dictionary fields <a class="header-anchor" href="#adding-additional-metadata-to-the-meta-dictionary-fields" aria-hidden="true">#</a></h3><p>For minor extensions you can use the <strong>Meta</strong> string dictionaries fields on the UserAuth tables to maintain custom metadata. They include useful <code>Get&lt;T&gt;</code> and <code>Set&lt;T&gt;</code> methods which can be used to blob additional complex types with each User, e.g:</p><div class="language-csharp"><pre><code>userAuth<span class="token punctuation">.</span><span class="token function">Set</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">Address</span> <span class="token punctuation">{</span> <span class="token range operator">..</span><span class="token punctuation">.</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name"><span class="token keyword">var</span></span> address <span class="token operator">=</span> userAuth<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Get</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Address<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="linking-referential-data-with-refid-and-refidstr-fields" tabindex="-1">Linking referential data with RefId and RefIdStr fields <a class="header-anchor" href="#linking-referential-data-with-refid-and-refidstr-fields" aria-hidden="true">#</a></h3><p>The <code>UserAuth</code> and <code>UserAuthDetails</code> tables also include an <code>int? RefId</code> and a <code>string RefIdStr</code> fields which you can use to reference external data like your own custom tables against each User Auth record or User OAuth registration.</p><h3 id="extend-userauthsession-with-your-own-typed-custom-session" tabindex="-1">Extend UserAuthSession with your own typed Custom Session <a class="header-anchor" href="#extend-userauthsession-with-your-own-typed-custom-session" aria-hidden="true">#</a></h3><p>In addition to a Custom UserAuth tables you can also use a custom <code>AuthUserSession</code> for maintaining typed Users Sessions which get blobbed in a fast <a href="/caching">Caching Provider</a> where its schema-less persistance characteristics, easily supports fast access to extended types.</p><div class="language-csharp"><pre><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CustomUserSession</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">AuthUserSession</span></span> <span class="token punctuation">{</span> <span class="token range operator">..</span><span class="token punctuation">.</span> <span class="token punctuation">}</span>

appHost<span class="token punctuation">.</span>Plugins<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">AuthFeature</span><span class="token punctuation">(</span>
    <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">CustomUserSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token range operator">..</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="iauthrepository-apis" tabindex="-1">IAuthRepository APIs <a class="header-anchor" href="#iauthrepository-apis" aria-hidden="true">#</a></h3><p>Inside your Services you can access the <strong>async</strong> <code>base.AuthRepositoryAsync</code> and <strong>sync</strong> <code>IAuthRepository</code> APIs with:</p><div class="language-csharp"><pre><code><span class="token keyword">await</span> <span class="token keyword">base</span><span class="token punctuation">.</span>AuthRepositoryAsync<span class="token punctuation">.</span><span class="token function">CreateUserAuthAsync</span><span class="token punctuation">(</span><span class="token range operator">..</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>You can use the Async APIs with every Auth Repository as an async wrapper is returned for Auth Repositories which only support the Sync APIs.</p><p>If you need to access the Auth Repository from inside a sync method you can access the <strong>sync</strong> APIs from <code>base.AuthRepository</code>, e.g:</p><div class="language-csharp"><pre><code><span class="token keyword">base</span><span class="token punctuation">.</span>AuthRepository<span class="token punctuation">.</span><span class="token function">CreateUserAuth</span><span class="token punctuation">(</span><span class="token range operator">..</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>All ServiceStack&#39;s built-in Auth Repositories support the extended <code>IUserAuthRepository</code> APIs which your Services can use to manage your App&#39;s registered users:</p><div class="language-csharp"><pre><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">IUserAuthRepository</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">IAuthRepository</span></span>
<span class="token punctuation">{</span>
    <span class="token return-type class-name">IUserAuth</span> <span class="token function">CreateUserAuth</span><span class="token punctuation">(</span><span class="token class-name">IUserAuth</span> newUser<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">string</span></span> password<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token return-type class-name">IUserAuth</span> <span class="token function">UpdateUserAuth</span><span class="token punctuation">(</span><span class="token class-name">IUserAuth</span> existingUser<span class="token punctuation">,</span> <span class="token class-name">IUserAuth</span> newUser<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token return-type class-name">IUserAuth</span> <span class="token function">UpdateUserAuth</span><span class="token punctuation">(</span><span class="token class-name">IUserAuth</span> existingUser<span class="token punctuation">,</span> <span class="token class-name">IUserAuth</span> newUser<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">string</span></span> password<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token return-type class-name">IUserAuth</span> <span class="token function">GetUserAuth</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> userAuthId<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">DeleteUserAuth</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> userAuthId<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">IUserAuthRepositoryAsync</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">IAuthRepositoryAsync</span></span>
<span class="token punctuation">{</span>
    <span class="token return-type class-name">Task<span class="token punctuation">&lt;</span>IUserAuth<span class="token punctuation">&gt;</span></span> <span class="token function">CreateUserAuthAsync</span><span class="token punctuation">(</span><span class="token class-name">IUserAuth</span> newUser<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">string</span></span> password<span class="token punctuation">,</span> <span class="token class-name">CancellationToken</span> token<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token return-type class-name">Task<span class="token punctuation">&lt;</span>IUserAuth<span class="token punctuation">&gt;</span></span> <span class="token function">UpdateUserAuthAsync</span><span class="token punctuation">(</span><span class="token class-name">IUserAuth</span> existingUser<span class="token punctuation">,</span> <span class="token class-name">IUserAuth</span> newUser<span class="token punctuation">,</span> <span class="token class-name">CancellationToken</span> token<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token return-type class-name">Task<span class="token punctuation">&lt;</span>IUserAuth<span class="token punctuation">&gt;</span></span> <span class="token function">UpdateUserAuthAsync</span><span class="token punctuation">(</span><span class="token class-name">IUserAuth</span> existingUser<span class="token punctuation">,</span> <span class="token class-name">IUserAuth</span> newUser<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">string</span></span> password<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token return-type class-name">Task<span class="token punctuation">&lt;</span>IUserAuth<span class="token punctuation">&gt;</span></span> <span class="token function">GetUserAuthAsync</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> userAuthId<span class="token punctuation">,</span> <span class="token class-name">CancellationToken</span> token<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token return-type class-name">Task</span> <span class="token function">DeleteUserAuthAsync</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> userAuthId<span class="token punctuation">,</span> <span class="token class-name">CancellationToken</span> token<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">IAuthRepository</span>
<span class="token punctuation">{</span>
    <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">LoadUserAuth</span><span class="token punctuation">(</span><span class="token class-name">IAuthSession</span> session<span class="token punctuation">,</span> <span class="token class-name">IAuthTokens</span> tokens<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">SaveUserAuth</span><span class="token punctuation">(</span><span class="token class-name">IAuthSession</span> authSession<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token return-type class-name">List<span class="token punctuation">&lt;</span>IUserAuthDetails<span class="token punctuation">&gt;</span></span> <span class="token function">GetUserAuthDetails</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> userAuthId<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token return-type class-name">IUserAuthDetails</span> <span class="token function">CreateOrMergeAuthSession</span><span class="token punctuation">(</span><span class="token class-name">IAuthSession</span> authSession<span class="token punctuation">,</span> <span class="token class-name">IAuthTokens</span> tokens<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token return-type class-name">IUserAuth</span> <span class="token function">GetUserAuth</span><span class="token punctuation">(</span><span class="token class-name">IAuthSession</span> authSession<span class="token punctuation">,</span> <span class="token class-name">IAuthTokens</span> tokens<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token return-type class-name">IUserAuth</span> <span class="token function">GetUserAuthByUserName</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> userNameOrEmail<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">SaveUserAuth</span><span class="token punctuation">(</span><span class="token class-name">IUserAuth</span> userAuth<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token return-type class-name"><span class="token keyword">bool</span></span> <span class="token function">TryAuthenticate</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> userName<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">string</span></span> password<span class="token punctuation">,</span> <span class="token keyword">out</span> <span class="token class-name">IUserAuth</span> userAuth<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token return-type class-name"><span class="token keyword">bool</span></span> <span class="token function">TryAuthenticate</span><span class="token punctuation">(</span><span class="token class-name">Dictionary<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">,</span> <span class="token keyword">string</span><span class="token punctuation">&gt;</span></span> digestHeaders<span class="token punctuation">,</span> 
        <span class="token class-name"><span class="token keyword">string</span></span> privateKey<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">int</span></span> nonceTimeOut<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">string</span></span> sequence<span class="token punctuation">,</span> <span class="token keyword">out</span> <span class="token class-name">IUserAuth</span> userAuth<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">IAuthRepositoryAsync</span>
<span class="token punctuation">{</span>
    <span class="token return-type class-name">Task</span> <span class="token function">LoadUserAuthAsync</span><span class="token punctuation">(</span><span class="token class-name">IAuthSession</span> session<span class="token punctuation">,</span> <span class="token class-name">IAuthTokens</span> tokens<span class="token punctuation">,</span> <span class="token class-name">CancellationToken</span> token<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token return-type class-name">Task</span> <span class="token function">SaveUserAuthAsync</span><span class="token punctuation">(</span><span class="token class-name">IAuthSession</span> authSession<span class="token punctuation">,</span> <span class="token class-name">CancellationToken</span> token<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token return-type class-name">Task<span class="token punctuation">&lt;</span>List<span class="token punctuation">&lt;</span>IUserAuthDetails<span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> <span class="token function">GetUserAuthDetailsAsync</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> userAuthId<span class="token punctuation">,</span> <span class="token class-name">CancellationToken</span> token<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token return-type class-name">Task<span class="token punctuation">&lt;</span>IUserAuthDetails<span class="token punctuation">&gt;</span></span> <span class="token function">CreateOrMergeAuthSessionAsync</span><span class="token punctuation">(</span><span class="token class-name">IAuthSession</span> authSession<span class="token punctuation">,</span> <span class="token class-name">IAuthTokens</span> tokens<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token return-type class-name">Task<span class="token punctuation">&lt;</span>IUserAuth<span class="token punctuation">&gt;</span></span> <span class="token function">GetUserAuthAsync</span><span class="token punctuation">(</span><span class="token class-name">IAuthSession</span> authSession<span class="token punctuation">,</span> <span class="token class-name">IAuthTokens</span> tokens<span class="token punctuation">,</span> <span class="token class-name">CancellationToken</span> token<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token return-type class-name">Task<span class="token punctuation">&lt;</span>IUserAuth<span class="token punctuation">&gt;</span></span> <span class="token function">GetUserAuthByUserNameAsync</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> userNameOrEmail<span class="token punctuation">,</span> <span class="token class-name">CancellationToken</span> token<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token return-type class-name">Task</span> <span class="token function">SaveUserAuthAsync</span><span class="token punctuation">(</span><span class="token class-name">IUserAuth</span> userAuth<span class="token punctuation">,</span> <span class="token class-name">CancellationToken</span> token<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token return-type class-name">Task<span class="token punctuation">&lt;</span>IUserAuth<span class="token punctuation">&gt;</span></span> <span class="token function">TryAuthenticateAsync</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> userName<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">string</span></span> password<span class="token punctuation">,</span> <span class="token class-name">CancellationToken</span> token<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token return-type class-name">Task<span class="token punctuation">&lt;</span>IUserAuth<span class="token punctuation">&gt;</span></span> <span class="token function">TryAuthenticateAsync</span><span class="token punctuation">(</span><span class="token class-name">Dictionary<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">,</span> <span class="token keyword">string</span><span class="token punctuation">&gt;</span></span> digestHeaders<span class="token punctuation">,</span> 
        <span class="token class-name"><span class="token keyword">string</span></span> privateKey<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">int</span></span> nonceTimeOut<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">string</span></span> sequence<span class="token punctuation">,</span> <span class="token class-name">CancellationToken</span> token<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="updating-userauth-tables-directly" tabindex="-1">Updating UserAuth tables directly <a class="header-anchor" href="#updating-userauth-tables-directly" aria-hidden="true">#</a></h3><p>If you need finer-grained access than the shared APIs above, you can update the <code>UserAuth</code> and <code>UserAuthDetails</code> POCOs in your preferred persistence provider directly.</p><p>E.g. if you&#39;re using the <code>OrmLiteAuthRepository</code> to store your Users in an RDBMS back-end you can use <a href="https://github.com/ServiceStack/ServiceStack.OrmLite" target="_blank" rel="noopener noreferrer">OrmLite APIs</a> to update the user details stored in the <code>UserAuth</code> and <code>UserAuthDetails</code> tables, e.g:</p><div class="language-csharp"><pre><code>Db<span class="token punctuation">.</span><span class="token function">UpdateOnly</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">UserAuth</span> <span class="token punctuation">{</span> DisplayName <span class="token operator">=</span> newName <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">where</span><span class="token punctuation">:</span> q <span class="token operator">=&gt;</span> q<span class="token punctuation">.</span>Id <span class="token operator">==</span> userId<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Which will only update the <code>DisplayName</code> column for the specified user.</p><p>If you&#39;re using a <a href="/auth-repository#extending-userauth-tables">Custom UserAuth Table</a> (e.g. <code>AppUser</code>) instead of the default <code>UserAuth</code> you would need to update that POCO data model instead.</p><h3 id="imanageroles-api" tabindex="-1">IManageRoles API <a class="header-anchor" href="#imanageroles-api" aria-hidden="true">#</a></h3><p>The <a href="https://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack/Auth/IAuthRepository.cs#L72" target="_blank" rel="noopener noreferrer">IManageRoles API</a> can be implemented by any <code>IAuthRepository</code> to provide an alternative strategy for querying and managing Users Roles and permissions.</p><p>This API is being used in the <code>OrmLiteAuthRepository</code> to provide an alternative way to store Roles and Permission in their own distinct table rather than being blobbed with the rest of the User Auth data.</p><p>This behavior can be enabled in <code>OrmLiteAuthRepository</code> by specifying <code>UseDistinctRoleTables=true</code> at registration, e.g:</p><div class="language-csharp"><pre><code>container<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Register</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>IAuthRepository<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span>c <span class="token operator">=&gt;</span>
    <span class="token keyword">new</span> <span class="token constructor-invocation class-name">OrmLiteAuthRepository</span><span class="token punctuation">(</span>c<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Resolve</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>IDbConnectionFactory<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        UseDistinctRoleTables <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>When enabled, roles and permissions are persisted in the distinct <strong>UserAuthRole</strong> table instead of being blobbed on the UserAuth. The <code>IAuthSession.HasRole()</code> and <code>IAuthSession.HasPermission()</code> on the Users Session should be used to check if a User has a specified Role or Permission.</p><p>If you&#39;re persisting roles in a different table you&#39;ll need to use the <code>IManageRoles</code> APIs to access &amp; manage a users role, e.g:</p><div class="language-csharp"><pre><code><span class="token class-name"><span class="token keyword">var</span></span> manageRoles <span class="token operator">=</span> <span class="token punctuation">(</span>IManageRolesAsync<span class="token punctuation">)</span><span class="token keyword">base</span><span class="token punctuation">.</span>AuthRepositoryAsync<span class="token punctuation">;</span>  <span class="token comment">// async</span>
<span class="token class-name"><span class="token keyword">var</span></span> manageRoles <span class="token operator">=</span> <span class="token punctuation">(</span>IManageRoles<span class="token punctuation">)</span><span class="token keyword">base</span><span class="token punctuation">.</span>AuthRepository<span class="token punctuation">;</span>            <span class="token comment">// sync</span>
</code></pre></div><p>These APIs can be used with <code>OrmLiteAuthRepository</code> whether Roles are persisted in external tables or not.</p><div class="language-csharp"><pre><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">IManageRoles</span>
<span class="token punctuation">{</span>
    <span class="token return-type class-name">ICollection<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">&gt;</span></span> <span class="token function">GetRoles</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> userAuthId<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token return-type class-name">ICollection<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">&gt;</span></span> <span class="token function">GetPermissions</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> userAuthId<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">GetRolesAndPermissions</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> userAuthId<span class="token punctuation">,</span> <span class="token keyword">out</span> <span class="token class-name">ICollection<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">&gt;</span></span> roles<span class="token punctuation">,</span> 
        <span class="token keyword">out</span> <span class="token class-name">ICollection<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">&gt;</span></span> permissions<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token return-type class-name"><span class="token keyword">bool</span></span> <span class="token function">HasRole</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> userAuthId<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">string</span></span> role<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token return-type class-name"><span class="token keyword">bool</span></span> <span class="token function">HasPermission</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> userAuthId<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">string</span></span> permission<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">AssignRoles</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> userAuthId<span class="token punctuation">,</span>
        <span class="token class-name">ICollection<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">&gt;</span></span> roles <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token class-name">ICollection<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">&gt;</span></span> permissions <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">UnAssignRoles</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> userAuthId<span class="token punctuation">,</span>
        <span class="token class-name">ICollection<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">&gt;</span></span> roles <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token class-name">ICollection<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">&gt;</span></span> permissions <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">IManageRolesAsync</span>
<span class="token punctuation">{</span>
    <span class="token return-type class-name">Task<span class="token punctuation">&lt;</span>ICollection<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> <span class="token function">GetRolesAsync</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> userAuthId<span class="token punctuation">,</span> <span class="token class-name">CancellationToken</span> token<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token return-type class-name">Task<span class="token punctuation">&lt;</span>ICollection<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> <span class="token function">GetPermissionsAsync</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> userAuthId<span class="token punctuation">,</span> <span class="token class-name">CancellationToken</span> token<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token return-type class-name">Task<span class="token punctuation">&lt;</span>Tuple<span class="token punctuation">&lt;</span>ICollection<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">&gt;</span><span class="token punctuation">,</span>ICollection<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> <span class="token function">GetRolesAndPermissionsAsync</span><span class="token punctuation">(</span>
        <span class="token class-name"><span class="token keyword">string</span></span> userAuthId<span class="token punctuation">,</span> <span class="token class-name">CancellationToken</span> token<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token return-type class-name">Task<span class="token punctuation">&lt;</span><span class="token keyword">bool</span><span class="token punctuation">&gt;</span></span> <span class="token function">HasRoleAsync</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> userAuthId<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">string</span></span> role<span class="token punctuation">,</span> <span class="token class-name">CancellationToken</span> token<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token return-type class-name">Task<span class="token punctuation">&lt;</span><span class="token keyword">bool</span><span class="token punctuation">&gt;</span></span> <span class="token function">HasPermissionAsync</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> userAuthId<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">string</span></span> permission<span class="token punctuation">,</span> <span class="token class-name">CancellationToken</span> token<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token return-type class-name">Task</span> <span class="token function">AssignRolesAsync</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> userAuthId<span class="token punctuation">,</span>
        <span class="token class-name">ICollection<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">&gt;</span></span> roles <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token class-name">ICollection<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">&gt;</span></span> permissions <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token class-name">CancellationToken</span> token<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token return-type class-name">Task</span> <span class="token function">UnAssignRolesAsync</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> userAuthId<span class="token punctuation">,</span>
        <span class="token class-name">ICollection<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">&gt;</span></span> roles <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token class-name">ICollection<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">&gt;</span></span> permissions <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token class-name">CancellationToken</span> token<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>More examples of this are in <a href="https://github.com/ServiceStack/ServiceStack/blob/master/tests/ServiceStack.Common.Tests/ManageRolesTests.cs" target="_blank" rel="noopener noreferrer">ManageRolesTests.cs</a>.</p><h3 id="assigning-roles-and-permissions" tabindex="-1">Assigning Roles and Permissions <a class="header-anchor" href="#assigning-roles-and-permissions" aria-hidden="true">#</a></h3><p>Super Users with the <strong>Admin</strong> role or Requests with an <a href="/debugging#authsecret">AdminAuthSecret</a> can call the built-in <code>/assignroles</code> and <code>/unassignroles</code> Services to add Roles/Permissions to existing users from an external Request, e.g:</p><div class="language-csharp"><pre><code><span class="token class-name"><span class="token keyword">var</span></span> client <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">JsonServiceClient</span><span class="token punctuation">(</span>baseUrl<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name"><span class="token keyword">var</span></span> response <span class="token operator">=</span> client<span class="token punctuation">.</span><span class="token function">Post</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">AssignRoles</span>
<span class="token punctuation">{</span>
    UserName <span class="token operator">=</span> userName<span class="token punctuation">,</span>
    Roles <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">List<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span> <span class="token string">&quot;TheRole&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    Permissions <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">List<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span> <span class="token string">&quot;ThePermission&quot;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Inside ServiceStack you can use the <code>AssignRoles</code> API to add Roles and Permissions to an existing User:</p><div class="language-csharp"><pre><code><span class="token class-name"><span class="token keyword">var</span></span> userAuth <span class="token operator">=</span> <span class="token keyword">await</span> AuthRepositoryAsync<span class="token punctuation">.</span><span class="token function">GetUserAuthByUserNameAsync</span><span class="token punctuation">(</span>userName<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>userAuth <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
    <span class="token keyword">throw</span> HttpError<span class="token punctuation">.</span><span class="token function">NotFound</span><span class="token punctuation">(</span>userName<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">await</span> AuthRepositoryAsync<span class="token punctuation">.</span><span class="token function">AssignRolesAsync</span><span class="token punctuation">(</span>userAuth<span class="token punctuation">,</span> <span class="token keyword">new</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">{</span> <span class="token string">&quot;TheRole&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">new</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">{</span> <span class="token string">&quot;ThePermission&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Alternatively you can add Roles when creating a new User with:</p><div class="language-csharp"><pre><code><span class="token keyword">await</span> AssignRolesAsync<span class="token punctuation">.</span><span class="token function">CreateUserAuthAsync</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">UserAuth</span>
<span class="token punctuation">{</span>
    UserName <span class="token operator">=</span> userName<span class="token punctuation">,</span>
    FirstName <span class="token operator">=</span> <span class="token string">&quot;John&quot;</span><span class="token punctuation">,</span>
    LastName <span class="token operator">=</span> <span class="token string">&quot;Doe&quot;</span><span class="token punctuation">,</span>
    DisplayName <span class="token operator">=</span> <span class="token string">&quot;John Doe&quot;</span><span class="token punctuation">,</span>
    Roles <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">List<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span> <span class="token string">&quot;TheRole&quot;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> userPassword<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="customizing-user-roles-and-permissions" tabindex="-1">Customizing User Roles and Permissions <a class="header-anchor" href="#customizing-user-roles-and-permissions" aria-hidden="true">#</a></h3><p>The default implementation of User Roles and Permissions on <a href="https://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack/AuthUserSession.cs" target="_blank" rel="noopener noreferrer">AuthUserSession</a> shows how ServiceStack&#39;s <code>[RequiredRole]</code> and <code>[RequiredPermission]</code> <a href="/authentication-and-authorization#the-requiredrole-and-requiredpermission-attributes">Roles and Permission attributes</a> are validated:</p><div class="language-csharp"><pre><code><span class="token keyword">public</span> <span class="token keyword">virtual</span> <span class="token return-type class-name"><span class="token keyword">bool</span></span> <span class="token function">HasPermission</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> permission<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token class-name"><span class="token keyword">var</span></span> managesRoles <span class="token operator">=</span> HostContext<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">TryResolve</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>IAuthRepository<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">as</span> <span class="token class-name">IManageRoles</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>managesRoles <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">return</span> managesRoles<span class="token punctuation">.</span><span class="token function">HasPermission</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>UserAuthId<span class="token punctuation">,</span> permission<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>Permissions <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>Permissions<span class="token punctuation">.</span><span class="token function">Contains</span><span class="token punctuation">(</span>permission<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">virtual</span> <span class="token return-type class-name"><span class="token keyword">bool</span></span> <span class="token function">HasRole</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> role<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token class-name"><span class="token keyword">var</span></span> managesRoles <span class="token operator">=</span> HostContext<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">TryResolve</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>IAuthRepository<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">as</span> <span class="token class-name">IManageRoles</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>managesRoles <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">return</span> managesRoles<span class="token punctuation">.</span><span class="token function">HasRole</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>UserAuthId<span class="token punctuation">,</span> role<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>Roles <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>Roles<span class="token punctuation">.</span><span class="token function">Contains</span><span class="token punctuation">(</span>role<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>These APIs are <code>virtual</code> so they can be overridden in both your Custom <code>AuthUserSession</code>. They default to looking at the <code>Roles</code> and <code>Permissions</code> collections stored on the Session. These collections are normally sourced from the <code>AuthUserRepository</code> when persisting the <a href="https://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack/Auth/UserAuth.cs" target="_blank" rel="noopener noreferrer">UserAuth and UserAuthDetails POCO&#39;s</a> and are used to populate the <code>UserAuthSession</code> on successful Authentication. These collections can be further customized by AuthProviders which is what <code>AspNetWindowsAuthProvider</code> does to add <a href="https://github.com/ServiceStack/ServiceStack/blob/9773b7fccc31ac4d715a02221f396b46cd14d7db/src/ServiceStack/Auth/AspNetWindowsAuthProvider.cs#L126" target="_blank" rel="noopener noreferrer">Authenticated WindowsAuth Roles</a>.</p><p>As seen above Roles/Permissions can instead be managed by AuthProviders that implement <code>IManageRoles</code> API which is what OrmLiteAuthProvider uses to look at distinct RDBMS tables to validate Roles/Permissions.</p><h3 id="microsoft-graph-roles" tabindex="-1">Microsoft Graph Roles <a class="header-anchor" href="#microsoft-graph-roles" aria-hidden="true">#</a></h3><p><a href="/auth#auth-providers">OAuth Providers</a> like Microsoft Graph have their own global roles for users managed separately. In order to combine both Microsoft Graph&#39;s Azure AD Roles with App-defined roles when using the <code>OrmLiteAuthRepository</code> it needs to be configured to persist roles in distinct role tables (required to capture the source of each role):</p><div class="language-csharp"><pre><code>services<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">AddSingleton</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>IAuthRepository<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span>c <span class="token operator">=&gt;</span>
    <span class="token keyword">new</span> <span class="token constructor-invocation class-name">OrmLiteAuthRepository<span class="token punctuation">&lt;</span>AppUser<span class="token punctuation">,</span> UserAuthDetails<span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>c<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Resolve</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>IDbConnectionFactory<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        UseDistinctRoleTables <span class="token operator">=</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Once configured you&#39;ll be able to manage your App&#39;s local User roles via ServiceStack&#39;s <a href="/auth-repository">Auth Repository</a>, <a href="/auth-repository#assigning-roles-and-permissions">Assign Roles APIs</a> or built-in <a href="/admin-ui-users">Admin Users UI</a> without interfering with Azure AD managed roles:</p><div class="block flex justify-center items-center"><a href="/admin-ui-users"><img class="max-w-screen-md" src="/assets/users-edit-default.ce806c2a.png"></a></div><h3 id="pbkdf2-password-hashing-implementation" tabindex="-1">PBKDF2 Password Hashing implementation <a class="header-anchor" href="#pbkdf2-password-hashing-implementation" aria-hidden="true">#</a></h3><p>ServiceStack uses the same <a href="https://en.wikipedia.org/wiki/PBKDF2" target="_blank" rel="noopener noreferrer">PBKDF2</a> password hashing algorithm <a href="http://ASP.NET" target="_blank" rel="noopener noreferrer">ASP.NET</a> Identity v3 by default for both new users and successful authentication logins where their password will automatically be re-hashed with the new implementation.</p><p>This also means if you wanted to switch, you&#39;ll be able to import <a href="http://ASP.NET" target="_blank" rel="noopener noreferrer">ASP.NET</a> Identity v3 User Accounts and their Password Hashes into ServiceStack.Auth&#39;s <code>UserAuth</code> tables and vice-versa.</p><h4 id="retain-previous-password-hashing-implementation" tabindex="-1">Retain previous Password Hashing implementation <a class="header-anchor" href="#retain-previous-password-hashing-implementation" aria-hidden="true">#</a></h4><p>If preferred you can revert to using the existing <code>SaltedHash</code> implementation with:</p><div class="language-csharp"><pre><code><span class="token function">SetConfig</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">HostConfig</span> <span class="token punctuation">{</span> 
    UseSaltedHash <span class="token operator">=</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>This also supports &quot;downgrading&quot; passwords that were hashed with the new <code>IPasswordHasher</code> provider where it will revert to using the older/weaker <code>SaltedHash</code> implementation on successful authentication.</p><h4 id="override-password-hashing-strength" tabindex="-1">Override Password Hashing Strength <a class="header-anchor" href="#override-password-hashing-strength" aria-hidden="true">#</a></h4><p>The new <a href="https://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack/Auth/PasswordHasher.cs" target="_blank" rel="noopener noreferrer">PasswordHasher</a> implementation can also be made to be computationally stronger or weaker by adjusting the iteration count (default 10000), e.g:</p><div class="language-csharp"><pre><code>container<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Register</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>IPasswordHasher<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">PasswordHasher</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="versionable-password-hashing" tabindex="-1">Versionable Password Hashing <a class="header-anchor" href="#versionable-password-hashing" aria-hidden="true">#</a></h4><p>The new <a href="https://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack.Interfaces/Auth/IPasswordHasher.cs" target="_blank" rel="noopener noreferrer">IPasswordHasher</a> interface includes support for versioning future Password Hashing algorithms and rehashing:</p><div class="language-csharp"><pre><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">IPasswordHasher</span>
<span class="token punctuation">{</span>
    <span class="token comment">// First byte marker used to specify the format used. The default implementation uses format:</span>
    <span class="token comment">// { 0x01, prf (UInt32), iter count (UInt32), salt length (UInt32), salt, subkey }</span>
    <span class="token return-type class-name"><span class="token keyword">byte</span></span> Version <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

    <span class="token comment">// Returns a boolean indicating whether the providedPassword matches the hashedPassword</span>
    <span class="token comment">// The needsRehash out parameter indicates whether the password should be re-hashed.</span>
    <span class="token return-type class-name"><span class="token keyword">bool</span></span> <span class="token function">VerifyPassword</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> hashedPassword<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">string</span></span> providedPassword<span class="token punctuation">,</span> <span class="token keyword">out</span> <span class="token class-name"><span class="token keyword">bool</span></span> needsRehash<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// Returns a hashed representation of the supplied password</span>
    <span class="token return-type class-name"><span class="token keyword">string</span></span> <span class="token function">HashPassword</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> password<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Which is implemented in all ServiceStack Auth Repositories where it will rehash passwords that used a different version or weaker strength, by utilizing the new API for verifying passwords:</p><div class="language-csharp"><pre><code><span class="token keyword">if</span> <span class="token punctuation">(</span>userAuth<span class="token punctuation">.</span><span class="token function">VerifyPassword</span><span class="token punctuation">(</span>password<span class="token punctuation">,</span> <span class="token keyword">out</span> <span class="token class-name"><span class="token keyword">var</span></span> needsRehash<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">RecordSuccessfulLogin</span><span class="token punctuation">(</span>userAuth<span class="token punctuation">,</span> needsRehash<span class="token punctuation">,</span> password<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>If you&#39;re using a Custom Auth Repository it will need to use the new password verification APIs, please refer to <a href="https://github.com/ServiceStack/ServiceStack/blob/bed1d900de93f889cca05299df4c33a04b7ad7a7/src/ServiceStack.Server/Auth/OrmLiteAuthRepository.cs#L325-L359" target="_blank" rel="noopener noreferrer">OrmLiteAuthRepository</a> for a complete concrete example.</p><h4 id="fallback-passwordhashers" tabindex="-1">Fallback PasswordHashers <a class="header-anchor" href="#fallback-passwordhashers" aria-hidden="true">#</a></h4><p>The list of <code>Config.FallbackPasswordHashers</code> can be used for migrating to a new Password Hashing algorithm by registering older Password Hashing implementations that were previously used to hash Users passwords. Failed password verifications will fallback to see if the password was hashed with any of the registered <code>FallbackPasswordHashers</code>, if any are valid, the password attempt will succeed and the password re-hashed with the registered <code>IPasswordHasher</code> implementation.</p><h3 id="digest-auth-hashes-only-created-when-needed" tabindex="-1">Digest Auth Hashes only created when needed <a class="header-anchor" href="#digest-auth-hashes-only-created-when-needed" aria-hidden="true">#</a></h3><p>Digest Auth Hashes are only populated if the <code>DigestAuthProvider</code> is registered. If you ever intend to support Digest access authentication in future but don&#39;t want to register the DigestAuthProvider just yet, you can force ServiceStack to continue to maintain Digest Auth Hashes with:</p><div class="language-csharp"><pre><code><span class="token keyword">new</span> <span class="token constructor-invocation class-name">AuthFeature</span> <span class="token punctuation">{</span>
    CreateDigestAuthHashes <span class="token operator">=</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Users that don&#39;t have Digest Auth Hashes will require logging in again in order to have it populated. If you don&#39;t intend to use Digest Auth you can clear the <code>DigestHa1Hash</code> column in your <code>UserAuth</code> table which is otherwise unused.</p></div></div><footer class="page-footer" data-v-7eddb2c4 data-v-07c132fc><div class="edit" data-v-07c132fc><div class="edit-link" data-v-07c132fc data-v-1ed99556><a class="link" href="https://github.com/ServiceStack/docs/edit/master/docs/auth-repository.md" target="_blank" rel="noopener noreferrer" data-v-1ed99556>Edit this page on GitHub <svg class="icon outbound icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-1ed99556><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div><div class="updated" data-v-07c132fc><!----></div></footer><div class="next-and-prev-link" data-v-7eddb2c4 data-v-38ede35f><div class="container" data-v-38ede35f><div class="prev" data-v-38ede35f><a class="link" href="/authentication-and-authorization" data-v-38ede35f><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon icon-prev" data-v-38ede35f><path d="M19,11H7.4l5.3-5.3c0.4-0.4,0.4-1,0-1.4s-1-0.4-1.4,0l-7,7c-0.1,0.1-0.2,0.2-0.2,0.3c-0.1,0.2-0.1,0.5,0,0.8c0.1,0.1,0.1,0.2,0.2,0.3l7,7c0.2,0.2,0.5,0.3,0.7,0.3s0.5-0.1,0.7-0.3c0.4-0.4,0.4-1,0-1.4L7.4,13H19c0.6,0,1-0.4,1-1S19.6,11,19,11z"></path></svg><span class="text" data-v-38ede35f>Authentication &amp; Authorization</span></a></div><div class="next" data-v-38ede35f><a class="link" href="/authentication-identity-servicestack" data-v-38ede35f><span class="text" data-v-38ede35f>Using ServiceStack Auth in MVC</span><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon icon-next" data-v-38ede35f><path d="M19.9,12.4c0.1-0.2,0.1-0.5,0-0.8c-0.1-0.1-0.1-0.2-0.2-0.3l-7-7c-0.4-0.4-1-0.4-1.4,0s-0.4,1,0,1.4l5.3,5.3H5c-0.6,0-1,0.4-1,1s0.4,1,1,1h11.6l-5.3,5.3c-0.4,0.4-0.4,1,0,1.4c0.2,0.2,0.5,0.3,0.7,0.3s0.5-0.1,0.7-0.3l7-7C19.8,12.6,19.9,12.5,19.9,12.4z"></path></svg></a></div></div></div><!--[--><!--]--></div></main></div><!----><!--]--></div></div>
    <script>__VP_HASH_MAP__ = JSON.parse("{\"access-http-specific-features-in-services.md\":\"71a4828d\",\"add-servicestack-reference.md\":\"9f1c5e5f\",\"adhoc-utils.md\":\"5446b98a\",\"admin-ui-database.md\":\"1c881877\",\"admin-ui-features.md\":\"3e3bda02\",\"admin-ui-profiling.md\":\"d8db3fbf\",\"admin-ui-redis.md\":\"4b5e2b4d\",\"admin-ui-users.md\":\"cf132ed4\",\"admin-ui-validation.md\":\"4344d069\",\"admin-ui.md\":\"176222d7\",\"advanced-deployment-octopus-deploy.md\":\"91623b2d\",\"advantages-of-message-based-web-services.md\":\"aef1212b\",\"amazon-sqs-mq.md\":\"7f2e9314\",\"api-design.md\":\"09cb7f4b\",\"api-explorer.md\":\"e01d1c60\",\"api-first-development.md\":\"767e3ef1\",\"api-key-authprovider.md\":\"9a084090\",\"app-tasks.md\":\"97a2ce0d\",\"appsettings.md\":\"1c9730cf\",\"architecture-overview.md\":\"b37fe1b0\",\"artists.md\":\"8fe0dc5b\",\"auth-anti-forgery.md\":\"bc21138e\",\"auth-openid.md\":\"89ce9cab\",\"auth-repository.md\":\"70c598bc\",\"auth-restricting-services.md\":\"26450647\",\"auth-signin-with-apple.md\":\"a335df76\",\"auth.md\":\"e6f09af8\",\"authentication-and-authorization.md\":\"1187a487\",\"authentication-identity-aspnet.md\":\"238a44b1\",\"authentication-identity-servicestack.md\":\"f3780688\",\"authentication-identityserver.md\":\"76c743cc\",\"auto-batched-requests.md\":\"024d0f2b\",\"auto-mapping.md\":\"ec2fa387\",\"autoquery-audit-log.md\":\"5dcdbfda\",\"autoquery-autogen.md\":\"2ed1589c\",\"autoquery-crud-bookings.md\":\"655970d4\",\"autoquery-crud.md\":\"3de0b375\",\"autoquery-data.md\":\"31aeee43\",\"autoquery-dynamodb.md\":\"1b37d674\",\"autoquery-memory.md\":\"4c7a56f8\",\"autoquery-rdbms.md\":\"4abedfb5\",\"autoquery-service.md\":\"de252bb3\",\"autoquery.md\":\"d8d73077\",\"aws-getting-started.md\":\"5f250ab6\",\"aws-pocodynamo.md\":\"cf3ec811\",\"aws.md\":\"a703b2b9\",\"azure-service-bus-mq.md\":\"b2ab7515\",\"azure.md\":\"618a9ff8\",\"background-mq.md\":\"c408b914\",\"benchmarks.md\":\"80a795dc\",\"blazor-diffusion.md\":\"d3a5a71c\",\"blazor-litestream.md\":\"19063065\",\"built-in-profiling.md\":\"e7eb48b2\",\"bundling-and-minification.md\":\"86ede704\",\"cache-aware-clients.md\":\"e550cac9\",\"cacheresponse-attribute.md\":\"8bdfff5b\",\"caching.md\":\"c58d0239\",\"cancellable-requests.md\":\"2b906543\",\"clients-overview.md\":\"b92316f8\",\"code-contribution-guide.md\":\"4d5e9c24\",\"commonjs-add-servicestack-reference.md\":\"b75a557f\",\"community-resources.md\":\"b5dc76f1\",\"compiled-razor-views.md\":\"77bbdde9\",\"compression.md\":\"d6463426\",\"concurrency-model.md\":\"f143ced4\",\"config-api.md\":\"83ce27e0\",\"contributing.md\":\"bb34b3be\",\"contributors.md\":\"7b31d981\",\"corsfeature.md\":\"624571aa\",\"create-webservice-from-scratch.md\":\"f9143c73\",\"create-your-first-webservice.md\":\"2888adc2\",\"csharp-add-servicestack-reference.md\":\"f1804de5\",\"csharp-client.md\":\"b9b5bdc4\",\"csharp-server-events-client.md\":\"4ee22853\",\"csv-format.md\":\"8b295cdd\",\"customize-http-responses.md\":\"2dbae99d\",\"customize-json-responses.md\":\"f319023d\",\"dart-add-servicestack-reference.md\":\"e4ed98da\",\"dart-client.md\":\"6c1cd32c\",\"debugging.md\":\"4bc14f22\",\"declarative-validation.md\":\"e251150e\",\"deploy-multiple-sites-to-aws.md\":\"21233256\",\"deploy-netcore-docker-aws-ecs.md\":\"43dea428\",\"deploy-netcore-to-amazon-linux-2-ami.md\":\"03be4baf\",\"design-message-based-apis.md\":\"a8cdbdd1\",\"design-rest-services.md\":\"54e7a71f\",\"do-github-action-mix-deployment.md\":\"d8ccb04e\",\"dotnet-new.md\":\"4aad0ca7\",\"dotnet-tool.md\":\"b84fb00f\",\"dump-utils.md\":\"9f88a390\",\"encrypted-messaging.md\":\"b568deac\",\"endpoints.md\":\"341b2964\",\"error-handling.md\":\"f7885153\",\"explore-servicestack.md\":\"299411ac\",\"filter-attributes.md\":\"44bcd135\",\"form-hijacking-prevention.md\":\"d48d8cff\",\"formats.md\":\"5aad1e92\",\"fsharp-add-servicestack-reference.md\":\"8cc2d0a3\",\"fsharp.md\":\"8f92d0aa\",\"github-action-templates.md\":\"fa6b444e\",\"grpc-android.md\":\"0da22dd6\",\"grpc-csharp.md\":\"9dd7f459\",\"grpc-dart.md\":\"6dba28d6\",\"grpc-flutter.md\":\"f7d1f6fa\",\"grpc-generic.md\":\"b9528a48\",\"grpc-go.md\":\"3d6bde20\",\"grpc-java.md\":\"e680ec72\",\"grpc-nodejs.md\":\"eb428699\",\"grpc-php.md\":\"5d272a1d\",\"grpc-python.md\":\"f1174e5d\",\"grpc-ruby.md\":\"0f92fb85\",\"grpc-ssl.md\":\"723a1f46\",\"grpc-swift.md\":\"88cb3cf8\",\"grpc.md\":\"21368805\",\"host-configuration.md\":\"b11529ce\",\"hot-reloading.md\":\"9358bb4e\",\"how-to-contribute.md\":\"e74162b8\",\"howto-write-unit-integration-tests.md\":\"3a43989a\",\"html-css-and-javascript-minification.md\":\"6171ae45\",\"html5reportformat.md\":\"25be056f\",\"http-caching.md\":\"322ae28e\",\"http-utils.md\":\"8aaf595e\",\"iis.md\":\"7bbdc016\",\"index.md\":\"b9273811\",\"install-rabbitmq-windows.md\":\"769f3878\",\"install-redis-windows.md\":\"40b893fe\",\"ioc.md\":\"804b28b0\",\"jamstack-with-vitepress-servicestack.md\":\"d4a8f321\",\"jamstacks-net.md\":\"f453d4f9\",\"java-add-servicestack-reference.md\":\"f4a6bb87\",\"java-server-events-client.md\":\"2ee8dc8f\",\"java.md\":\"a01e2bc2\",\"javascript-add-servicestack-reference.md\":\"d671678e\",\"javascript-client.md\":\"d0ad6cdb\",\"javascript-server-events-client.md\":\"85963168\",\"js-utils.md\":\"487c92d8\",\"json-format.md\":\"ea98d9b5\",\"json-jsv-and-xml.md\":\"83ce2d7b\",\"jsv-format.md\":\"60465179\",\"jupyter-notebooks-csharp.md\":\"ec39c922\",\"jupyter-notebooks-fsharp.md\":\"134e2487\",\"jupyter-notebooks-python.md\":\"571ea026\",\"jupyter-notebooks-reporting.md\":\"4a3247fd\",\"jupyter-notebooks.md\":\"dc0cb915\",\"jwt-authprovider.md\":\"e5563e4c\",\"kotlin-add-servicestack-reference.md\":\"fb4412ae\",\"learning-servicestack.md\":\"4abb0694\",\"linux-hosting-options.md\":\"87235787\",\"lisp-tcp-repl-server.md\":\"d67d6757\",\"litestream-templates.md\":\"bc8ae5fc\",\"locode_advanced.md\":\"6ccb20d7\",\"locode_auditing.md\":\"6ec80b9e\",\"locode_branding.md\":\"caef112b\",\"locode_code-first.md\":\"d18288cd\",\"locode_custom-components.md\":\"969dde79\",\"locode_custom-forms.md\":\"1a938018\",\"locode_custom.md\":\"c3d46376\",\"locode_database-first.md\":\"505713f1\",\"locode_declarative.md\":\"2fa3c03f\",\"locode_files-blazor.md\":\"477f1c23\",\"locode_files-upload-aws.md\":\"ad459315\",\"locode_files-upload-azure.md\":\"31748c09\",\"locode_files-upload-filesystem.md\":\"fc6a5a96\",\"locode_files.md\":\"83ae1047\",\"locode_formatters.md\":\"775d0259\",\"locode_index.md\":\"ba8f9754\",\"locode_input.md\":\"303eedfd\",\"locode_programmatic.md\":\"b8bc0322\",\"locode_relations.md\":\"116dc66f\",\"logging.md\":\"0245907a\",\"markdown-razor.md\":\"d4d534ab\",\"messagepack-format.md\":\"8c3654fc\",\"messaging.md\":\"2548dcaa\",\"metadata-page.md\":\"f38103d8\",\"mix-github-actions-aws-ecs.md\":\"5092b351\",\"mix-tool.md\":\"54afc72a\",\"modular-startup-legacy.md\":\"a94e5ca1\",\"modular-startup.md\":\"63bf19e8\",\"modularizing-services.md\":\"7a573186\",\"mono-repo.md\":\"98b660d4\",\"mono.md\":\"6d1e57c7\",\"multitenancy.md\":\"c1a8a388\",\"mvc-integration.md\":\"0ee8b425\",\"myget.md\":\"7cbd2bb8\",\"navigation.md\":\"3192b201\",\"netcore-deploy-rsync.md\":\"47f69861\",\"netcore-localhost-cert.md\":\"346b8c1d\",\"netcore-razor.md\":\"85eb610d\",\"netcore-redis.md\":\"61225088\",\"netcore-windows-desktop.md\":\"b2bbc606\",\"netcore.md\":\"b2962a13\",\"nhibernate.md\":\"1391a651\",\"npm-new.md\":\"6d8e3fea\",\"nuget.md\":\"fe98f548\",\"openapi.md\":\"b5a97dc4\",\"order-of-operations.md\":\"c0194935\",\"ormlite.md\":\"9afbfa4f\",\"ormlite_apis_delete.md\":\"009187e1\",\"ormlite_apis_insert.md\":\"69fdd5fe\",\"ormlite_apis_schema.md\":\"da871fa4\",\"ormlite_apis_select.md\":\"5e1f34f1\",\"ormlite_apis_update.md\":\"68d9c83f\",\"ormlite_async-apis.md\":\"06391003\",\"ormlite_autogen-t4.md\":\"4626537b\",\"ormlite_aws-rds-databases.md\":\"e9c5d2a2\",\"ormlite_complex-type-serializers.md\":\"7a38dbda\",\"ormlite_custom-sql-features.md\":\"c5e33bc3\",\"ormlite_custom-sql.md\":\"5b33e980\",\"ormlite_customer-orders-example.md\":\"2591eab7\",\"ormlite_db-migrations.md\":\"b393f1d4\",\"ormlite_dictionary-apis.md\":\"945c23e0\",\"ormlite_dynamic-result-sets.md\":\"b1b0abc9\",\"ormlite_ensure-apis.md\":\"d26654b2\",\"ormlite_filters.md\":\"9b86c257\",\"ormlite_getting-started.md\":\"b6f85d5c\",\"ormlite_index.md\":\"4af0a452\",\"ormlite_installation.md\":\"87a5b543\",\"ormlite_introspection.md\":\"45181d0b\",\"ormlite_limitations.md\":\"93ebdb37\",\"ormlite_litestream.md\":\"5db7688e\",\"ormlite_multi-database-connections.md\":\"8abe020c\",\"ormlite_optimistic-concurrency.md\":\"30d19b07\",\"ormlite_ormlite-apis.md\":\"9e0804c8\",\"ormlite_ormlite-utils.md\":\"7dcab694\",\"ormlite_postgres-features.md\":\"420f6b37\",\"ormlite_reference-support.md\":\"00541276\",\"ormlite_shippers-example.md\":\"e43dcfb6\",\"ormlite_sql-server-features.md\":\"50568b9d\",\"ormlite_stored-procedures.md\":\"801de07f\",\"ormlite_type-converters.md\":\"53833238\",\"ormlite_typed-joins.md\":\"a95e8724\",\"ormlite_untyped-apis.md\":\"c6c01b0b\",\"oss.md\":\"219c5639\",\"physical-project-structure.md\":\"d10ccaed\",\"plugins.md\":\"d06e84df\",\"post-command.md\":\"6ad51a3b\",\"postman.md\":\"1c08427c\",\"prerequisites.md\":\"2e2ee1f1\",\"protobuf-format.md\":\"1ae1fd17\",\"proxy-feature.md\":\"245d1b90\",\"python-add-servicestack-reference.md\":\"81e8c274\",\"rabbit-mq.md\":\"522e0b6b\",\"razor-notes.md\":\"fb72b914\",\"razor-ui-controls.md\":\"2852ab68\",\"razor-views-vs-content-pages.md\":\"6a7c2b64\",\"real-world-performance.md\":\"b8655b16\",\"redis-mq.md\":\"3bf11e84\",\"redis-server-events.md\":\"b00a9230\",\"redis.md\":\"e66e8c02\",\"redis_async.md\":\"03ed7626\",\"redis_automatic-retries.md\":\"438b7373\",\"redis_client-managers.md\":\"6cf6b100\",\"redis_client-usage.md\":\"93561ee1\",\"redis_client.md\":\"43b17914\",\"redis_custom-commands.md\":\"f264058c\",\"redis_design-nosql.md\":\"0c0e0988\",\"redis_distributed-locking.md\":\"5057eaae\",\"redis_index.md\":\"34836908\",\"redis_lua.md\":\"ccdf8162\",\"redis_profiling.md\":\"55675ef1\",\"redis_pubsub.md\":\"f089ddf6\",\"redis_redis-desktop.md\":\"2158b59a\",\"redis_schemaless-migration.md\":\"de4c6064\",\"redis_sentinel.md\":\"19919f11\",\"redis_stats.md\":\"57a758ed\",\"redis_transactions.md\":\"f55e3a45\",\"redis_troubleshooting.md\":\"47103940\",\"redis_typed-client.md\":\"69455439\",\"redis_typed-transactions.md\":\"f239f753\",\"reflection-utils.md\":\"b87efce9\",\"register.md\":\"edd406c7\",\"release-notes-history.md\":\"cd0eb6fa\",\"release-notes-v3.md\":\"1af5e792\",\"release-notes.md\":\"87c2b92b\",\"releases_2016-summary.md\":\"dd9e665c\",\"releases_index.md\":\"411bd25c\",\"releases_v4_0_0.md\":\"178ece9f\",\"releases_v4_0_06.md\":\"944bda61\",\"releases_v4_0_08.md\":\"c4ea9636\",\"releases_v4_0_09.md\":\"6461ce89\",\"releases_v4_0_10.md\":\"572eb78c\",\"releases_v4_0_11.md\":\"339aceb2\",\"releases_v4_0_12.md\":\"debd1c41\",\"releases_v4_0_15.md\":\"5489ad22\",\"releases_v4_0_18.md\":\"742d58f3\",\"releases_v4_0_19.md\":\"f2d90004\",\"releases_v4_0_21.md\":\"6834b58d\",\"releases_v4_0_22.md\":\"9d82ad66\",\"releases_v4_0_23.md\":\"03ca8a23\",\"releases_v4_0_24.md\":\"a8b65a33\",\"releases_v4_0_30.md\":\"6133b331\",\"releases_v4_0_31.md\":\"98165242\",\"releases_v4_0_32.md\":\"62687d78\",\"releases_v4_0_33.md\":\"b8b4e370\",\"releases_v4_0_34.md\":\"6aa001d9\",\"releases_v4_0_35.md\":\"78061a5a\",\"releases_v4_0_36.md\":\"e7ff8e88\",\"releases_v4_0_38.md\":\"3d39e214\",\"releases_v4_0_40.md\":\"b85abe4d\",\"releases_v4_0_42.md\":\"51600cf1\",\"releases_v4_0_44.md\":\"5bf1499a\",\"releases_v4_0_46.md\":\"3cda40bb\",\"releases_v4_0_48.md\":\"d49f36f3\",\"releases_v4_0_50.md\":\"4291e6b1\",\"releases_v4_0_52.md\":\"a5df6818\",\"releases_v4_0_54.md\":\"ec95f407\",\"releases_v4_0_56.md\":\"071ad90e\",\"releases_v4_0_58.md\":\"d8798a5c\",\"releases_v4_0_60.md\":\"fdba8269\",\"releases_v4_0_62.md\":\"f6fc8e5c\",\"releases_v4_5_0.md\":\"9def8739\",\"releases_v4_5_10.md\":\"5104d3ee\",\"releases_v4_5_12.md\":\"3654e4d4\",\"releases_v4_5_14.md\":\"5228c32d\",\"releases_v4_5_2.md\":\"c435874c\",\"releases_v4_5_4.md\":\"1e566e9f\",\"releases_v4_5_6.md\":\"075591fa\",\"releases_v4_5_8.md\":\"002c416c\",\"releases_v5_0_0.md\":\"57f23e38\",\"releases_v5_10.md\":\"adba447b\",\"releases_v5_11.md\":\"3ad3673a\",\"releases_v5_12.md\":\"d39f8111\",\"releases_v5_13.md\":\"b2c59442\",\"releases_v5_1_0.md\":\"085b39d6\",\"releases_v5_2.md\":\"dad4a9ef\",\"releases_v5_4.md\":\"1997ae5c\",\"releases_v5_5.md\":\"d06cca61\",\"releases_v5_6.md\":\"7da0bfb4\",\"releases_v5_7.md\":\"bebdab06\",\"releases_v5_8.md\":\"de2ecba1\",\"releases_v5_9.md\":\"c7ad6848\",\"releases_v6.md\":\"f673b98c\",\"releases_v6_1.md\":\"335da673\",\"releases_v6_2.md\":\"864b50db\",\"releases_v6_3.md\":\"f7ed946a\",\"releases_v6_4.md\":\"ecc8e09e\",\"releases_v6_5.md\":\"22c1c6b5\",\"releases_v6_6.md\":\"9e2f820e\",\"request-and-response-filters.md\":\"69d09ca7\",\"request-logger.md\":\"de541067\",\"roadmap.md\":\"75a0f97e\",\"routing.md\":\"7d546409\",\"search-test.md\":\"a387a674\",\"self-hosting.md\":\"25364f22\",\"serialization-deserialization.md\":\"c3063354\",\"server-events-grpc.md\":\"a8bc02e3\",\"server-events.md\":\"1635ba44\",\"server-ui-controls.md\":\"85d219fd\",\"service-complexity-and-dto-roles.md\":\"0eb97bbb\",\"service-discovery.md\":\"5117ee24\",\"service-gateway.md\":\"9334f285\",\"service-return-types.md\":\"b5f0e1c4\",\"servicestack-as-daemon-on-linux.md\":\"76b90379\",\"servicestack-client-umd.md\":\"8b880ef1\",\"servicestack-handler-resolution.md\":\"3d1b3dd4\",\"servicestack-in-fastcgi-hosted-on-nginx.md\":\"31f81938\",\"servicestack-integration.md\":\"04577630\",\"servicestack-side-by-side-with-another-web-framework.md\":\"ee74609d\",\"servicify.md\":\"15f95998\",\"sessions.md\":\"888abb56\",\"silverlight-client.md\":\"6365c32c\",\"simple-deployments-to-aws.md\":\"1b770f26\",\"simple-ioc.md\":\"86ed521d\",\"sitemaps.md\":\"d92c334b\",\"soap-support.md\":\"368e01b9\",\"ss-utils-js.md\":\"3b8b0692\",\"ssh-github-action-deployment.md\":\"921ef763\",\"ssl-redis-azure.md\":\"91b10470\",\"starlibs.md\":\"f566655c\",\"stripe.md\":\"2a350a6a\",\"studio-autoquery.md\":\"8774945e\",\"studio-users.md\":\"59a6a760\",\"studio-validation-rules.md\":\"54f681f2\",\"studio.md\":\"de45366c\",\"svg.md\":\"77bf6d29\",\"swagger-api.md\":\"63e340bc\",\"swift-add-servicestack-reference.md\":\"3ad75acb\",\"swift.md\":\"84eb9d0b\",\"templates-angular.md\":\"09e96dd2\",\"templates-angularjs-v15.md\":\"8915cc27\",\"templates-aspnet-empty.md\":\"e6ecf4a4\",\"templates-aws.md\":\"18f7b984\",\"templates-blazor-components.md\":\"8ffd1e49\",\"templates-blazor-server.md\":\"7b221a88\",\"templates-blazor-tailwind.md\":\"f1f3e480\",\"templates-blazor.md\":\"45dd3b59\",\"templates-corefx.md\":\"6cd5e5e6\",\"templates-desktop.md\":\"31430ab6\",\"templates-dotnet-scripts.md\":\"7e9b4194\",\"templates-empty.md\":\"eeda78d7\",\"templates-install-servicestackvs.md\":\"db86120f\",\"templates-jamstack.md\":\"086f914c\",\"templates-lite.md\":\"19b91d4d\",\"templates-mvc.md\":\"23d4e660\",\"templates-nextjs.md\":\"30ae5c74\",\"templates-nuxt.md\":\"31315d51\",\"templates-overview.md\":\"e7cdc781\",\"templates-react.md\":\"381995ae\",\"templates-single-page-apps.md\":\"63dfcb8a\",\"templates-spa-components.md\":\"d0ed6782\",\"templates-svelte.md\":\"0338fade\",\"templates-vue.md\":\"34faa680\",\"templates-vuetify.md\":\"473a41e6\",\"templates-webpack.md\":\"dcf4f847\",\"templates-websites.md\":\"c484a548\",\"templates-windows-service.md\":\"3e33336f\",\"testing.md\":\"c278ac25\",\"text.md\":\"1e7b269c\",\"text_index.md\":\"13220e7c\",\"typescript-add-servicestack-reference.md\":\"ddfc0ab5\",\"typescript-server-events-client.md\":\"817bd43f\",\"validation.md\":\"d2d4dacb\",\"vbnet-add-servicestack-reference.md\":\"945a69f6\",\"vbnet.md\":\"45ac4bd6\",\"versioning.md\":\"b614b19c\",\"view-and-template-selection.md\":\"fb166d39\",\"virtual-file-system.md\":\"54eff9ef\",\"vue-components.md\":\"57559696\",\"vue_gallery_alerts.md\":\"e21646fe\",\"vue_gallery_autocomplete.md\":\"42a3974f\",\"vue_gallery_autoform-new.md\":\"c601299c\",\"vue_gallery_autoform.md\":\"52daa54a\",\"vue_gallery_autoquerygrid.md\":\"3b8b45bd\",\"vue_gallery_datagrid.md\":\"3c59ca12\",\"vue_gallery_fileinput.md\":\"37f3ba1d\",\"vue_gallery_form-inputs.md\":\"9122ece6\",\"vue_gallery_formats.md\":\"7523828f\",\"vue_gallery_index.md\":\"31479d27\",\"vue_gallery_modals.md\":\"8ae5072a\",\"vue_gallery_navigation.md\":\"d608f268\",\"vue_gallery_taginput.md\":\"4ae4da1f\",\"vue_index.md\":\"f26edf6a\",\"vue_use-auth.md\":\"1ae94277\",\"vue_use-client.md\":\"49e515ac\",\"vue_use-config.md\":\"f484e755\",\"vue_use-files.md\":\"c649ff82\",\"vue_use-formatters.md\":\"c355bb2b\",\"vue_use-metadata.md\":\"794140fd\",\"vue_use-utils.md\":\"24cfcdd7\",\"web-apply.md\":\"534f1e66\",\"web-new.md\":\"3a481787\",\"web-services.md\":\"9568a719\",\"web-tool.md\":\"06a682aa\",\"web-trouble.md\":\"230fbc17\",\"webhooks.md\":\"1e7eea8c\",\"what-is-a-message-based-web-service.md\":\"370e912c\",\"why-not-odata.md\":\"0489dc0c\",\"why-not-razor.md\":\"633aa306\",\"why-remote-services-use-dtos.md\":\"038565b6\",\"why-servicestack.md\":\"d92ca483\",\"wire-format.md\":\"143f3dec\",\"world-validation.md\":\"bef23010\",\"your-first-webservice-explained.md\":\"bab04028\",\"ztest.md\":\"2dea7cb8\"}")</script>
    <script type="module" async src="/assets/app.27fe150c.js"></script>
    
  </body>
</html>